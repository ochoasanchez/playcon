const Cr=String.raw`(?:[$A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D])`,Fr=String.raw`(?:[$0-9A-Z_a-z\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF])`;function Pt(e){"@babel/helpers - typeof";return Pt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pt(e)}var oe={NONE:0,CAPTURING_PHASE:1,AT_TARGET:2,BUBBLING_PHASE:3},Mt=typeof DOMException>"u"?function(t,n){var r=new Error(t);return r.name=n,r}:DOMException,mn=new WeakMap,Ce=new WeakMap,M=function(t){var n=this;this[Symbol.toStringTag]="Event",this.toString=function(){return"[object Event]"};var r=Array.prototype.slice.call(arguments),u=r[1],o=r[2];if(!arguments.length)throw new TypeError("Failed to construct 'Event': 1 argument required, but only 0 present.");u=u||{},o=o||{};var i={};"composed"in u&&(i.composed=u.composed),mn.set(this,o),Ce.set(this,i);var a=this;a.initEvent(t,u.bubbles,u.cancelable),["target","currentTarget","eventPhase","defaultPrevented"].forEach(function(l){var f=l;Object.defineProperty(n,f,{get:function(){return i[f]!==void 0?i[f]:f in o?o[f]:f==="eventPhase"?0:f==="defaultPrevented"?!1:null}})});var s=["type","bubbles","cancelable","isTrusted","timeStamp","initEvent","composedPath","composed"];this.toString()==="[object CustomEvent]"&&s.push("detail","initCustomEvent"),Object.defineProperties(this,s.reduce(function(l,f){var c=f;return l[c]={get:function(){return c in i?i[c]:c in o?o[c]:["bubbles","cancelable","composed"].includes(c)?!1:void 0}},l},{}))};M.prototype.preventDefault=function(){if(!(this instanceof M))throw new TypeError("Illegal invocation");var e=mn.get(this),t=Ce.get(this);this.cancelable&&!t._passive&&(t.defaultPrevented=!0,typeof e.preventDefault=="function"&&e.preventDefault())};M.prototype.stopImmediatePropagation=function(){var e=Ce.get(this);e._stopImmediatePropagation=!0};M.prototype.stopPropagation=function(){var e=Ce.get(this);e._stopPropagation=!0};M.prototype.initEvent=function(e,t,n){var r=Ce.get(this);r._dispatched||(Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,get:function(){return e}}),Object.defineProperty(this,"bubbles",{enumerable:!0,configurable:!0,get:function(){return t}}),Object.defineProperty(this,"cancelable",{enumerable:!0,configurable:!0,get:function(){return n}}),r.type=e,t!==void 0&&(r.bubbles=t),n!==void 0&&(r.cancelable=n))};["type","target","currentTarget"].forEach(function(e){Object.defineProperty(M.prototype,e,{enumerable:!0,configurable:!0,get:function(){throw new TypeError("Illegal invocation")}})});["eventPhase","defaultPrevented","bubbles","cancelable","timeStamp"].forEach(function(e){Object.defineProperty(M.prototype,e,{enumerable:!0,configurable:!0,get:function(){throw new TypeError("Illegal invocation")}})});["NONE","CAPTURING_PHASE","AT_TARGET","BUBBLING_PHASE"].forEach(function(e,t){Object.defineProperty(M,e,{enumerable:!0,writable:!1,value:t}),Object.defineProperty(M.prototype,e,{writable:!1,value:t})});M[Symbol.toStringTag]="Function";M.prototype[Symbol.toStringTag]="EventPrototype";Object.defineProperty(M,"prototype",{writable:!1});var ie=function(t){var n=Array.prototype.slice.call(arguments),r=n[1],u=n[2];M.call(this,t,r,u),this[Symbol.toStringTag]="CustomEvent",this.toString=function(){return"[object CustomEvent]"},r=r||{},this.initCustomEvent(t,r.bubbles,r.cancelable,"detail"in r?r.detail:null)};Object.defineProperty(ie.prototype,"constructor",{enumerable:!1,writable:!0,configurable:!0,value:ie});ie.prototype.initCustomEvent=function(e,t,n,r){if(!(this instanceof ie))throw new TypeError("Illegal invocation");var u=Ce.get(this);ie.call(this,e,{bubbles:t,cancelable:n,detail:r},arguments[4]),!u._dispatched&&(r!==void 0&&(u.detail=r),Object.defineProperty(this,"detail",{get:function(){return u.detail}}))};ie[Symbol.toStringTag]="Function";ie.prototype[Symbol.toStringTag]="CustomEventPrototype";Object.defineProperty(ie.prototype,"detail",{enumerable:!0,configurable:!0,get:function(){throw new TypeError("Illegal invocation")}});Object.defineProperty(ie,"prototype",{writable:!1});function vr(e){var t=e.bubbles,n=e.cancelable,r=e.detail,u=e.type;return"detail"in e?new ie(u,{bubbles:t,cancelable:n,detail:r},e):new M(u,{bubbles:t,cancelable:n},e)}function ot(e,t,n){var r=e[t];r===void 0&&(e[t]=r=[]);var u=typeof n=="boolean"?{capture:n}:n||{},o=JSON.stringify(u),i=r.filter(function(a){return o===JSON.stringify(a.options)});return{listenersByTypeOptions:i,options:u,listenersByType:r}}var Br={addListener:function(t,n,r,u){var o=ot(t,r,u),i=o.listenersByTypeOptions;u=o.options;var a=o.listenersByType;i.some(function(s){return s.listener===n})||a.push({listener:n,options:u})},removeListener:function(t,n,r,u){var o=ot(t,r,u),i=o.listenersByType,a=JSON.stringify(o.options);i.some(function(s,l){return s.listener===n&&a===JSON.stringify(s.options)?(i.splice(l,1),i.length||delete t[r],!0):!1})},hasListener:function(t,n,r,u){var o=ot(t,r,u),i=o.listenersByTypeOptions;return i.some(function(a){return a.listener===n})}};function re(){throw new TypeError("Illegal constructor")}Object.assign(re.prototype,["Early","","Late","Default"].reduce(function(e,t){return["add","remove","has"].forEach(function(n){var r=n+t+"EventListener";e[r]=function(u,o){var i=arguments[2];if(arguments.length<2)throw new TypeError("2 or more arguments required");if(typeof u!="string")throw new Mt("UNSPECIFIED_EVENT_TYPE_ERR","UNSPECIFIED_EVENT_TYPE_ERR");try{"handleEvent"in o&&o.handleEvent.bind&&(o=o.handleEvent.bind(o))}catch(l){console.log("Uncaught `handleEvent` error",l)}var a="_"+t.toLowerCase()+(t===""?"l":"L")+"isteners";this[a]||Object.defineProperty(this,a,{value:{}});var s=n+"Listener";return Br[s](this[a],o,u,i)}}),e},{}));Object.assign(re.prototype,{_legacyOutputDidListenersThrowCheck:void 0,__setOptions:function(t){t=t||{},this._defaultSync=t.defaultSync,this._extraProperties=t.extraProperties||[],t.legacyOutputDidListenersThrowFlag&&(this._legacyOutputDidListenersThrowCheck=!0,this._extraProperties.push("__legacyOutputDidListenersThrowError"))},dispatchEvent:function(t){return this._dispatchEvent(t,!0)},_dispatchEvent:function(t,n){var r=this;["early","","late","default"].forEach(function(y){var C="_"+y+(y===""?"l":"L")+"isteners";r[C]||Object.defineProperty(r,C,{value:{}})});var u=Ce.get(t);if(u&&n&&u._dispatched)throw new Mt("The object is in an invalid state.","InvalidStateError");var o;u?o=t:(o=vr(t),u=Ce.get(o),u._dispatched=!0,this._extraProperties.forEach(function(y){y in t&&(o[y]=t[y])}));var i=o,a=i.type;function s(){u.eventPhase=oe.NONE,u.currentTarget=null,delete u._children}function l(){u._stopImmediatePropagation=void 0,u._stopPropagation=void 0,(!o.defaultPrevented||!u.cancelable)&&(u.eventPhase=oe.AT_TARGET,o.target.invokeCurrentListeners(o.target._defaultListeners,o,a)),s()}var f=function(){return u._stopImmediatePropagation=void 0,u._stopPropagation=void 0,r._defaultSync?l():setTimeout(l,0),u.eventPhase=oe.AT_TARGET,u._stopPropagation||(u._stopImmediatePropagation=void 0,u._stopPropagation=void 0,o.target.invokeCurrentListeners(o.target._lateListeners,o,a)),s(),!o.defaultPrevented};switch(n&&(u.target=this),"eventPhase"in o&&o.eventPhase){case oe.CAPTURING_PHASE:{if(u._stopPropagation)return f();this.invokeCurrentListeners(this._listeners,o,a);var c=u._children&&u._children.length&&u._children.pop();return(!c||c===o.target)&&(u.eventPhase=oe.AT_TARGET),c&&(c._defaultSync=this._defaultSync),(c||this)._dispatchEvent(o,!1)}case oe.AT_TARGET:return u._stopPropagation||(this.invokeCurrentListeners(this._listeners,o,a,!0),!u.bubbles)?f():(u.eventPhase=oe.BUBBLING_PHASE,this._dispatchEvent(o,!1));case oe.BUBBLING_PHASE:{if(u._stopPropagation)return f();var d=this.__getParent&&this.__getParent();return d?(d.invokeCurrentListeners(d._listeners,o,a,!0),d._defaultSync=this._defaultSync,d._dispatchEvent(o,!1)):f()}case oe.NONE:default:{if(u.eventPhase=oe.AT_TARGET,this.invokeCurrentListeners(this._earlyListeners,o,a),!("__getParent"in this))return u.eventPhase=oe.AT_TARGET,this._dispatchEvent(o,!1);for(var h=this,_=this;h.__getParent&&(h=h.__getParent())!==null;)u._children||(u._children=[]),u._children.push(_),_=h;return _._defaultSync=this._defaultSync,u.eventPhase=oe.CAPTURING_PHASE,_._dispatchEvent(o,!1)}}},invokeCurrentListeners:function(t,n,r,u){var o=this,i=Ce.get(n);i.currentTarget=this;var a=ot(t,r,{}),s=a.listenersByType.concat(),l=s.length?1:0;return s.some(function(f,c){var d=u?o["on"+r]:null;if(i._stopImmediatePropagation)return!0;c===l&&typeof d=="function"&&o.tryCatch(n,function(){var A=d.call(n.currentTarget,n);A===!1&&n.preventDefault()});var h=f.options,_=h.once,y=h.passive,C=h.capture;if(i._passive=y,C&&n.target!==n.currentTarget&&n.eventPhase===oe.CAPTURING_PHASE||n.eventPhase===oe.AT_TARGET||!C&&n.target!==n.currentTarget&&n.eventPhase===oe.BUBBLING_PHASE){var b=f.listener;o.tryCatch(n,function(){b.call(n.currentTarget,n)}),_&&o.removeEventListener(r,b,h)}return!1}),this.tryCatch(n,function(){var f=u?o["on"+r]:null;if(typeof f=="function"&&s.length<2){var c=f.call(n.currentTarget,n);c===!1&&n.preventDefault()}}),!n.defaultPrevented},tryCatch:function(t,n){try{n()}catch(r){this.triggerErrorEvent(r,t)}},triggerErrorEvent:function(t,n){var r=t;typeof t=="string"&&(r=new Error("Uncaught exception: "+t));var u,o=!1;typeof window>"u"||typeof ErrorEvent>"u"||window&&(typeof window>"u"?"undefined":Pt(window))==="object"&&!window.dispatchEvent?(o=!0,u=function(){setTimeout(function(){throw r})}):u=function(){var a=new ErrorEvent("error",{error:t,message:r.message||"",filename:r.fileName||"",lineno:r.lineNumber||0,colno:r.columnNumber||0});window.dispatchEvent(a)},(!o||!this._legacyOutputDidListenersThrowCheck)&&u(),this._legacyOutputDidListenersThrowCheck&&(n.__legacyOutputDidListenersThrowError=r)}});re.prototype[Symbol.toStringTag]="EventTargetPrototype";Object.defineProperty(re,"prototype",{writable:!1});var wr=re,gt={createInstance:function(t){var n=function(){this.__setOptions(t)};return n.prototype=wr.prototype,new n}};re.ShimEvent=M;re.ShimCustomEvent=ie;re.ShimDOMException=Mt;re.ShimEventTarget=re;re.EventTargetFactory=gt;function Ir(){Object.setPrototypeOf(ie,M),Object.setPrototypeOf(ie.prototype,M.prototype)}const rn={},D={};["DEBUG","cacheDatabaseInstances","autoName","fullIDLSupport","checkOrigin","cursorPreloadPackSize","UnicodeIDStart","UnicodeIDContinue","registerSCA","avoidAutoShim","win","DEFAULT_DB_SIZE","useSQLiteIndexes","fs","addNonIDBGlobals","replaceNonIDBGlobals","escapeDatabaseName","unescapeDatabaseName","databaseCharacterEscapeList","databaseNameLengthLimit","escapeNFDForDatabaseNames","addSQLiteExtension",["memoryDatabase",e=>{if(!/^(?::memory:|file::memory:(\?[^#]*)?(#.*)?)?$/u.test(e))throw new TypeError('`memoryDatabase` must be the empty string, ":memory:", or a "file::memory:[?queryString][#hash] URL".')}],"deleteDatabaseFiles","databaseBasePath","sysDatabaseBasePath","sqlBusyTimeout","sqlTrace","sqlProfile","createIndexes"].forEach(e=>{let t;Array.isArray(e)&&([e,t]=e),Object.defineProperty(D,e,{get(){return rn[e]},set(n){t&&t(n),rn[e]=n}})});function Sr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Or=/[\xC0-\xC5\xC7-\xCF\xD1-\xD6\xD9-\xDD\xE0-\xE5\xE7-\xEF\xF1-\xF6\xF9-\xFD\xFF-\u010F\u0112-\u0125\u0128-\u0130\u0134-\u0137\u0139-\u013E\u0143-\u0148\u014C-\u0151\u0154-\u0165\u0168-\u017E\u01A0\u01A1\u01AF\u01B0\u01CD-\u01DC\u01DE-\u01E3\u01E6-\u01F0\u01F4\u01F5\u01F8-\u021B\u021E\u021F\u0226-\u0233\u0344\u0385\u0386\u0388-\u038A\u038C\u038E-\u0390\u03AA-\u03B0\u03CA-\u03CE\u03D3\u03D4\u0400\u0401\u0403\u0407\u040C-\u040E\u0419\u0439\u0450\u0451\u0453\u0457\u045C-\u045E\u0476\u0477\u04C1\u04C2\u04D0-\u04D3\u04D6\u04D7\u04DA-\u04DF\u04E2-\u04E7\u04EA-\u04F5\u04F8\u04F9\u0622-\u0626\u06C0\u06C2\u06D3\u0929\u0931\u0934\u0958-\u095F\u09CB\u09CC\u09DC\u09DD\u09DF\u0A33\u0A36\u0A59-\u0A5B\u0A5E\u0B48\u0B4B\u0B4C\u0B5C\u0B5D\u0B94\u0BCA-\u0BCC\u0C48\u0CC0\u0CC7\u0CC8\u0CCA\u0CCB\u0D4A-\u0D4C\u0DDA\u0DDC-\u0DDE\u0F43\u0F4D\u0F52\u0F57\u0F5C\u0F69\u0F73\u0F75\u0F76\u0F78\u0F81\u0F93\u0F9D\u0FA2\u0FA7\u0FAC\u0FB9\u1026\u1B06\u1B08\u1B0A\u1B0C\u1B0E\u1B12\u1B3B\u1B3D\u1B40\u1B41\u1B43\u1E00-\u1E99\u1E9B\u1EA0-\u1EF9\u1F00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FC1-\u1FC4\u1FC6-\u1FD3\u1FD6-\u1FDB\u1FDD-\u1FEE\u1FF2-\u1FF4\u1FF6-\u1FFC\u212B\u219A\u219B\u21AE\u21CD-\u21CF\u2204\u2209\u220C\u2224\u2226\u2241\u2244\u2247\u2249\u2260\u2262\u226D-\u2271\u2274\u2275\u2278\u2279\u2280\u2281\u2284\u2285\u2288\u2289\u22AC-\u22AF\u22E0-\u22E3\u22EA-\u22ED\u2ADC\u304C\u304E\u3050\u3052\u3054\u3056\u3058\u305A\u305C\u305E\u3060\u3062\u3065\u3067\u3069\u3070\u3071\u3073\u3074\u3076\u3077\u3079\u307A\u307C\u307D\u3094\u309E\u30AC\u30AE\u30B0\u30B2\u30B4\u30B6\u30B8\u30BA\u30BC\u30BE\u30C0\u30C2\u30C5\u30C7\u30C9\u30D0\u30D1\u30D3\u30D4\u30D6\u30D7\u30D9\u30DA\u30DC\u30DD\u30F4\u30F7-\u30FA\u30FE\uAC00-\uD7A3\uFB1D\uFB1F\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFB4E]|\uD804[\uDC9A\uDC9C\uDCAB\uDD2E\uDD2F\uDF4B\uDF4C]|\uD805[\uDCBB\uDCBC\uDCBE\uDDBA\uDDBB]|\uD806\uDD38|\uD834[\uDD5E-\uDD64\uDDBB-\uDDC0]/,Tr=Sr(Or);function An(e){return e.replaceAll(/([\uD800-\uDBFF])(?![\uDC00-\uDFFF])|(^|[^\uD800-\uDBFF])([\uDC00-\uDFFF])/gu,function(t,n,r,u){return n?"^2"+n.codePointAt().toString(16).padStart(4,"0"):(r||"")+"^3"+u.codePointAt().toString(16).padStart(4,"0")})}function mt(e){return"_"+An(e.replaceAll("^","^^").replaceAll("\0","^0").replaceAll(/([A-Z])/gu,"^$1"))}function Y(e){return An(e.replaceAll("^","^^").replaceAll("\0","^0"))}function Ae(e){return xr(e).replaceAll(/(\^+)0/gu,(t,n)=>n.length%2?n.slice(1)+"\0":t).replaceAll("^^","^")}function Nr(e){return e.replaceAll('"','""')}function Q(e){return'"'+Nr(e)+'"'}function bn(e){if(D.escapeDatabaseName)return D.escapeDatabaseName(Y(e));if(e="D"+mt(e),D.escapeNFDForDatabaseNames!==!1&&(e=e.replaceAll(new RegExp(Tr,"gu"),function(t){return"^4"+t.codePointAt(0).toString(16).padStart(6,"0")})),D.databaseCharacterEscapeList!==!1&&(e=e.replace(D.databaseCharacterEscapeList?new RegExp(D.databaseCharacterEscapeList,"gu"):/[\u0000-\u001F\u007F"*/:<>?\\|]/gu,function(t){return"^1"+t.charCodeAt(0).toString(16).padStart(2,"0")})),D.databaseNameLengthLimit!==!1&&e.length>=(D.databaseNameLengthLimit||254)-(D.addSQLiteExtension!==!1?7:0))throw new Error("Unexpectedly long database name supplied; length limit required for Node compatibility; passed length: "+e.length+"; length limit setting: "+(D.databaseNameLengthLimit||254)+".");return e+(D.addSQLiteExtension!==!1?".sqlite":"")}function xr(e){return e.replaceAll(/(\^+)3(d[0-9a-f]{3})/gu,(t,n,r)=>n.length%2?n.slice(1)+String.fromCodePoint(Number.parseInt(r,16)):t).replaceAll(/(\^+)2(d[0-9a-f]{3})/gu,(t,n,r)=>n.length%2?n.slice(1)+String.fromCodePoint(Number.parseInt(r,16)):t)}function W(e){return Q("S"+mt(e))}function _e(e){return Q("I"+mt(e))}function At(e){return"I"+mt(e)}function it(e){return e.replaceAll("^","^^")}function Kt(e,t){return t[Symbol.hasInstance](e)}function se(e){return e!==null&&typeof e=="object"}function Pr(e){return se(e)&&"getDate"in e&&typeof e.getDate=="function"}function jr(e){return se(e)&&"size"in e&&typeof e.size=="number"&&"slice"in e&&typeof e.slice=="function"&&!("lastModified"in e)}function Rr(e){return se(e)&&"name"in e&&typeof e.name=="string"&&"slice"in e&&typeof e.slice=="function"&&"lastModified"in e}function Lr(e){return se(e)&&"byteLength"in e&&typeof e.byteLength=="number"&&("slice"in e&&typeof e.slice=="function"||"getFloat64"in e&&typeof e.getFloat64=="function")}function Cn(e){return se(e)&&Symbol.iterator in e&&typeof e[Symbol.iterator]=="function"}function Le(e,t){t.forEach(n=>{const r={get[n](){throw new TypeError("Illegal invocation")},set[n](o){throw new TypeError("Illegal invocation")}},u=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(e,n,u)})}function Se(e,t){t.forEach(n=>{const r={get[n](){throw new TypeError("Illegal invocation")}},u=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(e,n,u)})}function bt(e,t){t=typeof t=="string"?[t]:t,t.forEach(n=>{const r={get[n](){return e["__"+n]},set[n](o){e["__"+n]=o}},u=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(e,n,u)}),t.forEach(n=>{e[n]=null})}function Te(e,t,n=null){t=typeof t=="string"?[t]:t,t.forEach(function(r){let u;n&&r in n?u=n[r]:(Object.defineProperty(e,"__"+r,{enumerable:!1,configurable:!1,writable:!0}),u={get[r](){return this["__"+r]}});const o=Object.getOwnPropertyDescriptor(u,r);Object.defineProperty(e,r,o)})}function un(e){const t=D.UnicodeIDStart||"[$A-Z_a-z]",n=D.UnicodeIDContinue||"[$0-9A-Z_a-z]",r="(?:"+t+"|[$_])",u="(?:"+n+"|[$_‌‍])";return new RegExp("^"+r+u+"*$","u").test(e)}function on(e){return typeof e=="string"&&(e===""||un(e)||e.split(".").every(t=>un(t)))}function Fn(e){return on(e)||Array.isArray(e)&&!!e.length&&[...e].every(t=>on(t))}function Ct(e,t){e=Math.floor(Number(e));let n,r;switch(t){case"unsigned long long":{n=9007199254740991,r=0;break}case"unsigned long":{n=4294967295,r=0;break}default:throw new Error("Unrecognized type supplied to enforceRange")}if(!Number.isFinite(e)||e>n||e<r)throw new TypeError("Invalid range: "+e);return e}function Vt(e,t){return e===null&&t?"":jt(e)}function jt(e){return""+e}function Gt(e){return Cn(e)?[...e].map(t=>jt(t)):jt(e)}function we(e){return e==null}function ae(e,t,n){const r=new M(e,n);return r.debug=t,r}Object.defineProperty(M,Symbol.hasInstance,{value:e=>se(e)&&"target"in e&&"bubbles"in e&&typeof e.bubbles=="boolean"});const qr=["oldVersion","newVersion"];function ce(e){M.call(this,e),this[Symbol.toStringTag]="IDBVersionChangeEvent",this.toString=function(){return"[object IDBVersionChangeEvent]"},this.__eventInitDict=arguments[1]||{}}ce.prototype=Object.create(M.prototype);ce.prototype[Symbol.toStringTag]="IDBVersionChangeEventPrototype";qr.forEach(e=>{const t={get[e](){if(!(this instanceof ce))throw new TypeError("Illegal invocation");return this.__eventInitDict&&this.__eventInitDict[e]||(e==="oldVersion"?0:null)}},n=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(ce.prototype,e,n)});Object.defineProperty(ce,Symbol.hasInstance,{value:e=>se(e)&&"oldVersion"in e&&"defaultPrevented"in e&&typeof e.defaultPrevented=="boolean"});Object.defineProperty(ce.prototype,"constructor",{enumerable:!1,writable:!0,configurable:!0,value:ce});Object.defineProperty(ce,"prototype",{writable:!1});function vn(e,t){return new DOMException.prototype.constructor(t,e||"DOMException")}const Ue={IndexSizeError:1,HierarchyRequestError:3,WrongDocumentError:4,InvalidCharacterError:5,NoModificationAllowedError:7,NotFoundError:8,NotSupportedError:9,InUseAttributeError:10,InvalidStateError:11,SyntaxError:12,InvalidModificationError:13,NamespaceError:14,InvalidAccessError:15,TypeMismatchError:17,SecurityError:18,NetworkError:19,AbortError:20,URLMismatchError:21,QuotaExceededError:22,TimeoutError:23,InvalidNodeTypeError:24,DataCloneError:25,EncodingError:0,NotReadableError:0,UnknownError:0,ConstraintError:0,DataError:0,TransactionInactiveError:0,ReadOnlyError:0,VersionError:0,OperationError:0,NotAllowedError:0},Je={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25};function kr(){function e(r,u){this[Symbol.toStringTag]="DOMException",this._code=u in Ue?Ue[u]:Je[u]||0,this._name=u||"Error",this._message=r===void 0?"":""+r,Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,writable:!0,value:this._code}),u!==void 0&&Object.defineProperty(this,"name",{configurable:!0,enumerable:!0,writable:!0,value:this._name}),r!==void 0&&Object.defineProperty(this,"message",{configurable:!0,enumerable:!1,writable:!0,value:this._message})}const t=function(){};return t.prototype=Object.create(Error.prototype),["name","message"].forEach(r=>{Object.defineProperty(t.prototype,r,{enumerable:!0,get(){if(!(this instanceof e||this instanceof t||this instanceof Error))throw new TypeError("Illegal invocation");return this[r==="name"?"_name":"_message"]}})}),Object.defineProperty(t.prototype,"code",{configurable:!0,enumerable:!0,get(){throw new TypeError("Illegal invocation")}}),e.prototype=new t,e.prototype[Symbol.toStringTag]="DOMExceptionPrototype",Object.defineProperty(e,"prototype",{writable:!1}),Object.keys(Ue).forEach(r=>{Object.defineProperty(e.prototype,r,{enumerable:!0,configurable:!1,value:Ue[r]}),Object.defineProperty(e,r,{enumerable:!0,configurable:!1,value:Ue[r]})}),Object.keys(Je).forEach(r=>{Object.defineProperty(e.prototype,r,{enumerable:!0,configurable:!1,value:Je[r]}),Object.defineProperty(e,r,{enumerable:!0,configurable:!1,value:Je[r]})}),Object.defineProperty(e.prototype,"constructor",{writable:!0,configurable:!0,enumerable:!1,value:e}),e}const Bn=kr();function Ur(e,t){return new Bn(t,e)}function je(e,t,n){if(D.DEBUG){const r=n&&typeof n=="object"&&n.message?n.message:n;console[typeof console.error=="function"?"error":"log"](e+": "+t+". "+(r||"")),console.trace&&console.trace()}}function wn(e){return e&&typeof e=="object"&&typeof e.name=="string"}function Mr(e){let t;if(e){if(e.length===1)return e[0];for(const n of e){if(wn(n))return n;n&&typeof n.message=="string"&&(t=n)}}return t}function Qe(e){let t,n;switch(e.code){case 4:{t="QuotaExceededError",n="The operation failed because there was not enough remaining storage space, or the storage quota was reached and the user declined to give more space to the database.";break}default:{t="UnknownError",n="The operation failed for reasons unrelated to the database itself and not covered by any other errors.";break}}n+=" ("+e.message+")--("+e.code+")";const r=m(t,n);return r.sqlError=e,r}let Xe,Ht=!1;try{Xe=vn("test name","test message"),wn(Xe)&&Xe.name==="test name"&&Xe.message==="test message"&&(Ht=!0)}catch{}const m=Ht?function(e,t,n){return je(e,t,n),vn(e,t)}:function(e,t,n){return je(e,t,n),Ur(e,t)},at=Ht?DOMException:Bn,In=["onsuccess","onerror"],Sn=["source","transaction","readyState"],On=["result","error"];function $(){throw new TypeError("Illegal constructor")}$.__super=function(){this[Symbol.toStringTag]="IDBRequest",this.__setOptions({legacyOutputDidListenersThrowFlag:!0}),On.forEach(t=>{Object.defineProperty(this,"__"+t,{enumerable:!1,configurable:!1,writable:!0}),Object.defineProperty(this,t,{enumerable:!0,configurable:!0,get(){if(!this.__done)throw m("InvalidStateError","Can't get "+t+"; the request is still pending.");return this["__"+t]}})}),Te(this,Sn,{readyState:{get readyState(){return this.__done?"done":"pending"}}}),bt(this,In),this.__result=void 0,this.__error=this.__source=this.__transaction=null,this.__done=!1};$.__createInstance=function(){return new $.__super};$.prototype=gt.createInstance({extraProperties:["debug"]});$.prototype[Symbol.toStringTag]="IDBRequestPrototype";$.prototype.__getParent=function(){return this.toString()==="[object IDBOpenDBRequest]"?null:this.__transaction};Se($.prototype,Sn);Se($.prototype,On);Le($.prototype,In);Object.defineProperty($.prototype,"constructor",{enumerable:!1,writable:!0,configurable:!0,value:$});$.__super.prototype=$.prototype;Object.defineProperty($,"prototype",{writable:!1});const Tn=["onblocked","onupgradeneeded"];function ge(){throw new TypeError("Illegal constructor")}ge.prototype=Object.create($.prototype);Object.defineProperty(ge.prototype,"constructor",{enumerable:!1,writable:!0,configurable:!0,value:ge});const Kr=ge;ge.__createInstance=function(){function e(){$.__super.call(this),this[Symbol.toStringTag]="IDBOpenDBRequest",this.__setOptions({legacyOutputDidListenersThrowFlag:!0,extraProperties:["oldVersion","newVersion","debug"]}),bt(this,Tn)}return e.prototype=Kr.prototype,new e};Le(ge.prototype,Tn);ge.prototype[Symbol.toStringTag]="IDBOpenDBRequestPrototype";Object.defineProperty(ge,"prototype",{writable:!1});function lt(e){return e&&typeof e.then=="function"}function ft(e,t){e.then(null,t)}const Vr=2,Ge=0,He=1;function V(e){const t=this;t.v=0,t.s=Vr,t.c=[[],[]];function n(o,i){t.v=o,t.s=i,t.c[i].forEach(function(a){a(o)}),t.c[i].length&&(t.c=null)}function r(o){t.c&&(lt(o)?ft(o.then(r),u):n(o,Ge))}function u(o){t.c&&(lt(o)?ft(o.then(u),u):n(o,He))}try{e(r,u)}catch(o){u(o)}}V.prototype.then=function(e,t){const n=this;return new V(function(r,u){const o=typeof t=="function"?t:u;function i(){try{r(e?e(n.v):n.v)}catch(a){o(a)}}n.s===Ge?i():n.s===He?o(n.v):(n.c[Ge].push(i),n.c[He].push(o))})};V.prototype.catch=function(e){const t=this;return new V(function(n,r){function u(){try{n(e(t.v))}catch(o){r(o)}}t.s===He?u():t.s===Ge?n(t.v):(t.c[He].push(u),t.c[Ge].push(n))})};V.all=function(e){return new V((t,n)=>{let r=e.length;const u=[];if(!r){t(u);return}e.forEach((o,i)=>{lt(o)?ft(o.then(a=>{u[i]=a,--r||t(u)}),n):(u[i]=o,--r||t(e))})})};V.race=function(e){let t=!1;return new V((n,r)=>{e.some((u,o)=>lt(u)?(ft(u.then(i=>{t||(n(i),t=!0)}),r),!1):(n(u),t=!0,!0))})};V.resolve=function(e){return new V((t,n)=>{t(e)})};V.reject=function(e){return new V((t,n)=>{n(e)})};function Ie(e,t){const n=R(e),r=R(t),u=n>r?1:n===r?0:-1;if(D.DEBUG){let o=he(n),i=he(r);typeof e=="object"&&(e=JSON.stringify(e),o=JSON.stringify(o)),typeof t=="object"&&(t=JSON.stringify(t),i=JSON.stringify(i)),o!==e&&console.warn(e+" was incorrectly encoded as "+o),i!==t&&console.warn(t+" was incorrectly encoded as "+i)}return u}const Ee={invalid:100,number:200,date:300,string:400,binary:500,array:600},Nn=Object.keys(Ee);Nn.forEach(e=>{Ee[e]=String.fromCodePoint(Ee[e])});const xn=Nn.reduce((e,t)=>(e[Ee[t]]=t,e),{}),xe=["negativeInfinity","bigNegative","smallNegative","smallPositive","bigPositive","positiveInfinity"],Pn={invalid:{encode(){return Ee.invalid+"-"},decode(){}},number:{encode(e){let t=e===Number.MIN_VALUE?"0."+"0".repeat(214)+"2":Math.abs(e).toString(32);const n=t.indexOf(".");t=n!==-1?t.replace(".",""):t;const r=t.search(/[^0]/u);t=t.slice(r);let u,o,i;return Number.isFinite(Number(e))?e<0?e>-1?(u=xe.indexOf("smallNegative"),o=ze(r),i=ve(Ze(t))):(u=xe.indexOf("bigNegative"),o=ve(ze(n!==-1?n:t.length)),i=ve(Ze(t))):e<1?(u=xe.indexOf("smallPositive"),o=ve(ze(r)),i=Ze(t)):(u=xe.indexOf("bigPositive"),o=ze(n!==-1?n:t.length),i=Ze(t)):(o=dt(2),i=dt(11),u=xe.indexOf(e>0?"positiveInfinity":"negativeInfinity")),Ee.number+"-"+u+o+i},decode(e){const t=Number(e.slice(2,3));let n=e.slice(3,5),r=e.slice(5,16);switch(xe[t]){case"negativeInfinity":return Number.NEGATIVE_INFINITY;case"positiveInfinity":return Number.POSITIVE_INFINITY;case"bigPositive":return et(r,n);case"smallPositive":return n=sn(ve(n)),et(r,n);case"smallNegative":return n=sn(n),r=ve(r),-et(r,n);case"bigNegative":return n=ve(n),r=ve(r),-et(r,n);default:throw new Error("Invalid number.")}}},string:{encode(e,t){return t&&(e=e.replaceAll(/(.)/gu,"-$1")+" "),Ee.string+"-"+e},decode(e,t){return e=e.slice(2),t&&(e=e.slice(0,-1).replaceAll(/-(.)/gu,"$1")),e}},array:{encode(e){const t=[];for(const[n,r]of e.entries()){const u=R(r,!0);t[n]=u}return t.push(Ee.invalid+"-"),Ee.array+"-"+JSON.stringify(t)},decode(e){const t=JSON.parse(e.slice(2));t.pop();for(let n=0;n<t.length;n++){const r=t[n],u=he(r,!0);t[n]=u}return t}},date:{encode(e){return Ee.date+"-"+e.toJSON()},decode(e){return new Date(e.slice(2))}},binary:{encode(e){return Ee.binary+"-"+(e.byteLength?[...Ln(e)].map(t=>String(t).padStart(3,"0")):"")},decode(e){const t=e.slice(2),n=t.length?t.split(",").map(o=>Number.parseInt(o)):[],r=new ArrayBuffer(n.length);return new Uint8Array(r).set(n),r}}};function ze(e){const t=e.toString(32);return t.length===1?"0"+t:t}function Ze(e){return(e+dt(11)).slice(0,11)}function ve(e){let t="";for(const n of e)t+=(31-Number.parseInt(n,32)).toString(32);return t}function et(e,t){const n=Number.parseInt(t,32);if(n<0)return an(Number.parseInt(e,32)*32**(n-10));if(n<11){const u=e.slice(0,n),o=Number.parseInt(u,32),i=e.slice(n),a=Number.parseInt(i,32)*32**(n-11);return an(o+a)}const r=e+dt(n-11);return Number.parseInt(r,32)}function an(e,t=16){return Number.parseFloat(e.toPrecision(t))}function dt(e){return"0".repeat(e)}function sn(e){return"-"+e}function jn(e){if(Array.isArray(e))return"array";if(Pr(e))return"date";if(Lr(e))return"binary";const t=typeof e;return["string","number"].includes(t)?t:"invalid"}function Rn(e,t){return qe(e,t,!1,!0)}function Gr(e){return qe(e,null,!0,!0)}function Ln(e){let t=0,n=0;if(ArrayBuffer.isView(e)){if(e.buffer===void 0)throw new TypeError("Could not copy the bytes held by a buffer source as the buffer was undefined.");t=e.byteOffset,n=e.byteLength}else n=e.byteLength;return new Uint8Array("buffer"in e&&e.buffer||e,t,n)}function qe(e,t,n,r){if(t=t||[],t.includes(e))return{type:"array",invalid:!0,message:"An array key cannot be circular"};const u=jn(e),o={type:u,value:e};switch(u){case"number":return Number.isNaN(e)?{type:"NaN",invalid:!0}:Object.is(e,-0)?{type:u,value:0}:o;case"string":return o;case"binary":return{type:"binary",value:Ln(e)};case"array":{const i=e,a=i.length;t.push(e);const s=[];for(let l=0;l<a;l++){if(!n&&!Object.hasOwn(i,l))return{type:u,invalid:!0,message:"Does not have own index property"};try{const f=i[l],c=qe(f,t,!1,r);if(c.invalid){if(n)continue;return{type:u,invalid:!0,message:"Bad array entry value-to-key conversion"}}(!n||!r&&s.every(d=>Ie(d,c.value)!==0)||r&&s.every(d=>Ie(d,c)!==0))&&s.push(r?c:c.value)}catch(f){if(!n)throw f}}return{type:u,value:s}}case"date":{const i=e;return Number.isNaN(i.getTime())?{type:u,invalid:!0,message:"Not a valid date"}:r?{type:u,value:i.getTime()}:{type:u,value:new Date(i.getTime())}}case"invalid":default:{const i=e===null?"null":typeof e;return{type:i,invalid:!0,message:"Not a valid key; type "+i}}}}function qn(e,t){return qe(e,null,!0,t)}function me(e,t){const n=Rn(e,t);if(n.invalid)throw m("DataError",n.message||"Not a valid key; type: "+n.type);return n}function Hr(e,t,n){return We(e,t,n,!0)}function Qr(e,t,n){return Qt(e,t)}function We(e,t,n,r){const u=Qt(e,t);return u.failure?u:n?qn(u.value,r):qe(u.value,null,!1,r)}function Qt(e,t,n,r){if(Array.isArray(t)){const o=[];return t.some(i=>{const a=Qt(e,i);return a.failure?!0:(o.push(a.value),!1)})?{failure:!0}:{value:o}}return t===""?{value:e}:t.split(".").some(o=>{if(o==="length"&&(typeof e=="string"||Array.isArray(e)))e=e.length;else if(jr(e))switch(o){case"size":case"type":e=e[o];break}else if(Rr(e))switch(o){case"name":case"lastModified":e=e[o];break;case"lastModifiedDate":e=new Date(e.lastModified);break}else return!se(e)||!Object.hasOwn(e,o)?!0:(e=e[o],e===void 0);return!1})?{failure:!0}:{value:e}}function kn(e,t,n){const r=n.split("."),u=r.pop();r.forEach(o=>{Object.hasOwn(e,o)||(e[o]={}),e=e[o]}),e[u]=t}function Un(e,t){const n=t.split(".");n.pop();for(const r of n){if(!se(e))return!1;if(!Object.hasOwn(e,r))return!0;e=e[r]}return se(e)}function Dt(e,t,n){let r=t.lower===void 0,u=t.upper===void 0;const o=R(e,!0),i=n?t.__lowerCached:R(t.lower,!0),a=n?t.__upperCached:R(t.upper,!0);return!r&&(t.lowerOpen&&o!==null&&i!==null&&o>i||!t.lowerOpen&&(!o&&!i||o!==null&&i!==null&&o>=i))&&(r=!0),!u&&(t.upperOpen&&o!==null&&a!==null&&o<a||!t.upperOpen&&(!o&&!a||o!==null&&a!==null&&o<=a))&&(u=!0),r&&u}function Mn(e,t){return xn[t.slice(0,1)]==="array"?t.indexOf(e)>1:t===e}function _t(e,t){const n=[];if(Array.isArray(e))for(let r of e){if(Array.isArray(r)){if(t&&t.lower===t.upper)continue;if(r.length===1)r=r[0];else{_t(r,t).length>0&&n.push(r);continue}}(we(t)||Dt(r,t,!0))&&n.push(r)}else(we(t)||Dt(e,t,!0))&&n.push(e);return n}function Kn(e){const{type:t,value:n}=e;switch(t){case"number":case"string":return n;case"array":{const r=[],u=n.length;let o=0;for(;o<u;){const i=Kn(n[o]);r[o]=i,o++}return r}case"date":return new Date(n);case"binary":{const r=n.length,u=new ArrayBuffer(r);return new Uint8Array(u,n.byteOffset||0,n.byteLength).set(n),u}case"invalid":default:throw new Error("Bad key")}}function R(e,t){return e===void 0?null:Pn[jn(e)].encode(e,t)}function he(e,t){if(typeof e=="string")return Pn[xn[e.slice(0,1)]].decode(e,t)}function Rt(e,t){return he(R(e,t),t)}const Wt=9007199254740992;function Vn(e,t,n,r){e.executeSql('SELECT "currNum" FROM __sys__ WHERE "name" = ?',[Y(t.__currentName)],function(u,o){o.rows.length!==1?n(1):n(o.rows.item(0).currNum)},function(u,o){return r(m("DataError","Could not get the auto increment value for key",o)),!1})}function $t(e,t,n,r,u){const o='UPDATE __sys__ SET "currNum" = ? WHERE "name" = ?',i=[n,Y(t.__currentName)];D.DEBUG&&console.log(o,i),e.executeSql(o,i,function(){r(n)},function(a,s){return u(m("UnknownError","Could not set the auto increment value for key",s)),!1})}function Gn(e,t,n,r,u){return n=n===Wt?n+2:n+1,$t(e,t,n,r,u)}function Hn(e,t,n,r){Vn(e,t,function(u){if(u>Wt){n("failure");return}Gn(e,t,u,function(){n(null,u,u)},r)},r)}function Qn(e,t,n,r,u){typeof n!="number"||n<1?r():Vn(e,t,function(o){const i=Math.floor(Math.min(n,Wt));i>=o?Gn(e,t,i,function(){r(o)},u):r()},u)}const Wr=Object.freeze(Object.defineProperty({__proto__:null,assignCurrentNumber:$t,checkKeyCouldBeInjectedIntoValue:Un,convertKeyToValue:Kn,convertValueToKey:Rn,convertValueToKeyRethrowingAndIfInvalid:me,convertValueToKeyValueDecoded:qe,convertValueToMultiEntryKey:Gr,convertValueToMultiEntryKeyDecoded:qn,decode:he,encode:R,evaluateKeyPathOnValue:Qr,extractKeyFromValueUsingKeyPath:Hr,extractKeyValueDecodedFromValueUsingKeyPath:We,findMultiEntryMatches:_t,generateKeyForStore:Hn,injectKeyIntoValueUsingKeyPath:kn,isKeyInRange:Dt,isMultiEntryMatch:Mn,possiblyUpdateKeyGenerator:Qn,roundTrip:Rt},Symbol.toStringTag,{value:"Module"})),$r=["lower","upper","lowerOpen","upperOpen"];function G(){throw this.__lowerOpen=!1,this.__upperOpen=!1,new TypeError("Illegal constructor")}const Yr=G;G.__createInstance=function(e,t,n,r){function u(){if(this[Symbol.toStringTag]="IDBKeyRange",e===void 0&&t===void 0)throw m("DataError","Both arguments to the key range method cannot be undefined");let o,i;if(e!==void 0&&(o=Rt(e),me(e)),t!==void 0&&(i=Rt(t),me(t)),e!==void 0&&t!==void 0&&e!==t&&R(e)>R(t))throw m("DataError","`lower` must not be greater than `upper` argument in `bound()` call.");this.__lower=o,this.__upper=i,this.__lowerOpen=!!n,this.__upperOpen=!!r}return u.prototype=Yr.prototype,new u};G.prototype.includes=function(e){if(!se(this)||typeof this.__lowerOpen!="boolean")throw new TypeError("Illegal invocation");if(!arguments.length)throw new TypeError("IDBKeyRange.includes requires a key argument");return me(e),Dt(e,this)};G.only=function(e){if(!arguments.length)throw new TypeError("IDBKeyRange.only requires a value argument");return G.__createInstance(e,e,!1,!1)};G.lowerBound=function(e){if(!arguments.length)throw new TypeError("IDBKeyRange.lowerBound requires a value argument");return G.__createInstance(e,void 0,arguments[1],!0)};G.upperBound=function(e){if(!arguments.length)throw new TypeError("IDBKeyRange.upperBound requires a value argument");return G.__createInstance(void 0,e,!0,arguments[1])};G.bound=function(e,t){if(arguments.length<=1)throw new TypeError("IDBKeyRange.bound requires lower and upper arguments");return G.__createInstance(e,t,arguments[2],arguments[3])};G.prototype[Symbol.toStringTag]="IDBKeyRangePrototype";$r.forEach(e=>{Object.defineProperty(G.prototype,"__"+e,{enumerable:!1,configurable:!1,writable:!0});const t={get[e](){if(!se(this)||typeof this.__lowerOpen!="boolean")throw new TypeError("Illegal invocation");return this["__"+e]}},n=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(G.prototype,e,n)});Object.defineProperty(G,Symbol.hasInstance,{value:e=>se(e)&&"upper"in e&&"lowerOpen"in e&&typeof e.lowerOpen=="boolean"});Object.defineProperty(G,"prototype",{writable:!1});function Ft(e,t,n,r,u,o){if(e&&(e.lower!==void 0||e.upper!==void 0)){u&&n.push("AND");let i,a;const s=e.lower!==void 0,l=e.upper!==void 0;if(s&&(i=o?e.__lowerCached:R(e.lower)),l&&(a=o?e.__upperCached:R(e.upper)),s){if(r.push(Y(i)),l&&i===a&&!e.lowerOpen&&!e.upperOpen){n.push(t,"=","?");return}n.push(t,e.lowerOpen?">":">=","?")}s&&l&&n.push("AND"),l&&(n.push(t,e.upperOpen?"<":"<=","?"),r.push(Y(a)))}}function vt(e,t){if(Kt(e,G))return e.toString()!=="[object IDBKeyRange]"?G.__createInstance(e.lower,e.upper,e.lowerOpen,e.upperOpen):e;if(we(e)){if(t)throw m("DataError","No key or range was specified");return}return me(e),G.only(e)}let Wn=!1;const cn={test:!0};if(Object.defineProperty)try{Object.defineProperty(cn,"test",{enumerable:!1}),cn.test&&(Wn=!0)}catch{}const ee=function(){throw this._items=[],this._length=0,new TypeError("Illegal constructor")};ee.prototype={constructor:ee,contains(e){if(!arguments.length)throw new TypeError("DOMStringList.contains must be supplied a value");return this._items.includes(e)},item(e){if(!arguments.length)throw new TypeError("DOMStringList.item must be supplied a value");return e<0||e>=this.length||!Number.isInteger(e)?null:this._items[e]},clone(){const e=ee.__createInstance();return e._items=this._items.slice(),e._length=this.length,e.addIndexes(),e},addIndexes(){for(let e=0;e<this._items.length;e++)this[e]=this._items[e]},sortList(){return this._items.sort(),this.addIndexes(),this._items},forEach(e,t){this._items.forEach(e,t)},map(e,t){return this._items.map(e,t)},indexOf(e){return this._items.indexOf(e)},push(e){this._items.push(e),this._length++,this.sortList()},splice(...e){this._items.splice(...e),this._length=this._items.length;for(const t in this)t===String(Number.parseInt(t))&&delete this[t];this.sortList()},[Symbol.toStringTag]:"DOMStringListPrototype",*[Symbol.iterator](){let e=0;for(;e<this._items.length;)yield this._items[e++]}};Object.defineProperty(ee,Symbol.hasInstance,{value(e){return Object.prototype.toString.call(e)==="DOMStringListPrototype"}});const Jr=ee;Object.defineProperty(ee,"__createInstance",{value(){const e=function(){this.toString=function(){return"[object DOMStringList]"},Object.defineProperty(this,"length",{enumerable:!0,get(){return this._length}}),this._items=[],this._length=0};return e.prototype=Jr.prototype,new e}});Wn&&(Object.defineProperty(ee,"prototype",{writable:!1}),["addIndexes","sortList","forEach","map","indexOf","push","splice","constructor","__createInstance"].forEach(n=>{Object.defineProperty(ee.prototype,n,{enumerable:!1})}),Object.defineProperty(ee.prototype,"length",{configurable:!0,enumerable:!0,get(){throw new TypeError("Illegal invocation")}}),["_items","_length"].forEach(n=>{Object.defineProperty(ee.prototype,n,{enumerable:!1,writable:!0})}));let Xr=0;const $n=["onabort","oncomplete","onerror"],Lt=["objectStoreNames","mode","db","error"];function B(){throw new TypeError("Illegal constructor")}const zr=B;B.__createInstance=function(e,t,n){function r(){const u=this;u[Symbol.toStringTag]="IDBTransaction",Te(u,Lt),u.__id=++Xr,u.__active=!0,u.__running=!1,u.__errored=!1,u.__requests=[],u.__objectStoreNames=t,u.__mode=n,u.__db=e,u.__error=null,u.__setOptions({legacyOutputDidListenersThrowFlag:!0}),Lt.forEach(o=>{Object.defineProperty(this,o,{configurable:!0})}),bt(this,$n),u.__storeHandles={},setTimeout(()=>{u.__executeRequests()},0)}return r.prototype=zr.prototype,new r};B.prototype=gt.createInstance({defaultSync:!0,extraProperties:["complete"]});B.prototype.__transFinishedCb=function(e,t){t(!!e)};B.prototype.__executeRequests=function(){const e=this;if(e.__running){D.DEBUG&&console.log("Looks like the request set is already running",e.mode);return}e.__running=!0,e.db.__db[e.mode==="readonly"?"readTransaction":"transaction"](function(r){e.__tx=r;let u,o=-1;function i(l,f){if(e.__errored||e.__requestsFinished||(f&&(u.req=f),!u.req)||u.req.__done)return;u.req.__done=!0,u.req.__result=l,u.req.__error=null,e.__active=!0;const c=ae("success");if(u.req.dispatchEvent(c),c.__legacyOutputDidListenersThrowError){je("Error","An error occurred in a success handler attached to request chain",c.__legacyOutputDidListenersThrowError),e.__abortTransaction(m("AbortError","A request was aborted (in user handler after success)."));return}s()}function a(...l){if(e.__errored||e.__requestsFinished||u.req&&u.req.__done)return;const f=Mr(l);if(!u.req){e.__abortTransaction(f);return}u.req.__done=!0,u.req.__error=f,u.req.__result=void 0,u.req.addLateEventListener("error",function(d){d.cancelable&&d.defaultPrevented&&!d.__legacyOutputDidListenersThrowError&&s()}),u.req.addDefaultEventListener("error",function(){u.req&&e.__abortTransaction(u.req.__error)}),e.__active=!0;const c=ae("error",f,{bubbles:!0,cancelable:!0});u.req.dispatchEvent(c),c.__legacyOutputDidListenersThrowError&&(je("Error","An error occurred in an error handler attached to request chain",c.__legacyOutputDidListenersThrowError),c.preventDefault(),e.__abortTransaction(m("AbortError","A request was aborted (in user handler after error).")))}function s(){if(!(e.__errored||e.__requestsFinished))if(o++,o>=e.__requests.length)e.__requests=[],e.__active&&t();else try{if(u=e.__requests[o],!u.req){u.op(r,u.args,s,a);return}if(u.req.__done)return;u.op(r,u.args,i,a,s)}catch(l){a(l)}}s()},function(r){if(r===!0)return;const u=Qe(r);e.__abortTransaction(u)},function(){if(e.__transFinishedCb===B.prototype.__transFinishedCb){if(!e.__transactionEndCallback&&!e.__requestsFinished){e.__transactionFinished=!0;return}e.__transactionEndCallback&&!e.__completed&&e.__transFinishedCb(e.__errored,e.__transactionEndCallback)}},function(n,r,u,o,i){return n.readOnly||r?!0:(e.__transFinishedCb=function(a,s){a?o(a,s):i(s)},e.__transactionEndCallback&&!e.__completed&&e.__transFinishedCb(e.__errored,e.__transactionEndCallback),!1)});function t(){e.__active=!1,e.__requestsFinished=!0;function n(){e.__completed=!0,D.DEBUG&&console.log("Transaction completed");const u=ae("complete");try{e.__internal=!0,e.dispatchEvent(u),e.__internal=!1,e.dispatchEvent(ae("__complete"))}catch(o){throw e.__internal=!1,e.__errored=!0,o}finally{e.__storeHandles={}}}if(e.mode==="readwrite"){if(e.__transactionFinished){n();return}e.__transactionEndCallback=n;return}if(e.mode==="readonly"){n();return}const r=ae("__beforecomplete");r.complete=n,e.dispatchEvent(r)}};B.prototype.__createRequest=function(e){const t=this,n=$.__createInstance();return n.__source=e!==void 0?e:t.db,n.__transaction=t,n};B.prototype.__addToTransactionQueue=function(e,t,n){const r=this.__createRequest(n);return this.__pushToQueue(r,e,t),r};B.prototype.__addNonRequestToTransactionQueue=function(e,t){this.__pushToQueue(null,e,t)};B.prototype.__pushToQueue=function(e,t,n){this.__assertActive(),this.__requests.push({op:t,args:n,req:e})};B.prototype.__assertActive=function(){if(!this.__active)throw m("TransactionInactiveError","A request was placed against a transaction which is currently not active, or which is finished")};B.prototype.__assertWritable=function(){if(this.mode==="readonly")throw m("ReadOnlyError","The transaction is read only")};B.prototype.__assertVersionChange=function(){B.__assertVersionChange(this)};B.prototype.objectStore=function(e){const t=this;if(!(t instanceof B))throw new TypeError("Illegal invocation");if(arguments.length===0)throw new TypeError("No object store name was specified");if(B.__assertNotFinished(t),t.__objectStoreNames.indexOf(e)===-1)throw m("NotFoundError",e+" is not participating in this transaction");const n=t.db.__objectStores[e];if(!n)throw m("NotFoundError",e+" does not exist in "+t.db.name);return(!t.__storeHandles[e]||t.__storeHandles[e].__pendingDelete||t.__storeHandles[e].__deleted)&&(t.__storeHandles[e]=v.__clone(n,t)),t.__storeHandles[e]};B.prototype.__abortTransaction=function(e){const t=this;if(je("Error","An error occurred in a transaction",e),t.__errored)return;t.__errored=!0,t.mode==="versionchange"&&(t.db.__version=t.db.__oldVersion,t.db.__objectStoreNames=t.db.__oldObjectStoreNames,t.__objectStoreNames=t.db.__oldObjectStoreNames,Object.values(t.db.__objectStores).concat(Object.values(t.__storeHandles)).forEach(function(r){"__pendingName"in r&&t.db.__oldObjectStoreNames.indexOf(r.__pendingName)>-1&&(r.__name=r.__originalName),r.__indexNames=r.__oldIndexNames,delete r.__pendingDelete,Object.values(r.__indexes).concat(Object.values(r.__indexHandles)).forEach(function(u){"__pendingName"in u&&r.__oldIndexNames.indexOf(u.__pendingName)>-1&&(u.__name=u.__originalName),delete u.__pendingDelete})})),t.__active=!1,e!==null&&(t.__error=e),t.__requestsFinished&&setTimeout(()=>{throw e},0);function n(r,u){r?u&&"code"in u&&typeof u.code=="number"?D.DEBUG&&console.log("Rollback erred; feature is probably not supported as per WebSQL",t):D.DEBUG&&console.log("Rollback succeeded",t):D.DEBUG&&console.log("Rollback not possible due to missing transaction",t),t.dispatchEvent(ae("__preabort")),t.__requests.filter(function(o,i,a){return o.req&&!o.req.__done&&[i,-1].includes(a.map(s=>s.req).lastIndexOf(o.req))}).reduce(function(o,i){return o.then(function(){if(!i.req)throw new Error("Missing request");i.req.__done=!0,i.req.__result=void 0,i.req.__error=m("AbortError","A request was aborted (an unfinished request).");const a=ae("error",i.req.__error,{bubbles:!0,cancelable:!0});return new V(s=>{setTimeout(()=>{if(!i.req)throw new Error("Missing request");i.req.dispatchEvent(a),s()})})})},V.resolve(void 0)).then(function(){const o=ae("abort",e,{bubbles:!0,cancelable:!1});setTimeout(()=>{t.__abortFinished=!0,t.dispatchEvent(o),t.__storeHandles={},t.dispatchEvent(ae("__abort"))})}).catch(o=>{throw console.log("Abort error"),o})}t.__transFinishedCb(!0,function(r){if(r&&t.__tx){if(t.mode==="readwrite"){if(t.__transactionFinished){n();return}t.__transactionEndCallback=n;return}try{t.__tx.executeSql("ROLLBACK",[],n,n)}catch{n()}}else n(null,{code:0})})};B.prototype.abort=function(){const e=this;if(!(e instanceof B))throw new TypeError("Illegal invocation");D.DEBUG&&console.log("The transaction was aborted",e),B.__assertNotFinished(e),e.__abortTransaction(null)};B.prototype[Symbol.toStringTag]="IDBTransactionPrototype";B.__assertVersionChange=function(e){if(!e||e.mode!=="versionchange")throw m("InvalidStateError","Not a version transaction")};B.__assertNotVersionChange=function(e){if(e&&e.mode==="versionchange")throw m("InvalidStateError","Cannot be called during a version transaction")};B.__assertNotFinished=function(e){if(!e||e.__completed||e.__abortFinished||e.__errored)throw m("InvalidStateError","Transaction finished by commit or abort")};B.__assertNotFinishedObjectStoreMethod=function(e){try{B.__assertNotFinished(e)}catch(t){throw e&&!e.__completed&&!e.__abortFinished?m("TransactionInactiveError","A request was placed against a transaction which is currently not active, or which is finished"):t}};B.__assertActive=function(e){if(!e||!e.__active)throw m("TransactionInactiveError","A request was placed against a transaction which is currently not active, or which is finished")};B.prototype.__getParent=function(){return this.db};Le(B.prototype,$n);Se(B.prototype,Lt);Object.defineProperty(B.prototype,"constructor",{enumerable:!1,writable:!0,configurable:!0,value:B});Object.defineProperty(B,"prototype",{writable:!1});function ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ln(Object(n),!0).forEach(function(r){Zr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ln(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pe(e){return pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pe(e)}function Yt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jt(e,t,n){return t&&function(u,o){for(var i=0;i<o.length;i++){var a=o[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(u,Jn(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zr(e,t,n){return(t=Jn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Be(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,u){var o=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(o!=null){var i,a,s,l,f=[],c=!0,d=!1;try{if(s=(o=o.call(r)).next,u===0){if(Object(o)!==o)return;c=!1}else for(;!(c=(i=s.call(o)).done)&&(f.push(i.value),f.length!==u);c=!0);}catch(h){d=!0,a=h}finally{try{if(!c&&o.return!=null&&(l=o.return(),Object(l)!==l))return}finally{if(d)throw a}}return f}}(e,t)||Yn(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Yn(e,t){if(e){if(typeof e=="string")return qt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qt(e,t):void 0}}function qt(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jn(e){var t=function(r,u){if(typeof r!="object"||r===null)return r;var o=r[Symbol.toPrimitive];if(o!==void 0){var i=o.call(r,u);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(e,"string");return typeof t=="symbol"?t:String(t)}var P=Jt(function e(t){Yt(this,e),this.p=new Promise(t)});P.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&Object.defineProperty(P.prototype,Symbol.toStringTag,{get:function(){return"TypesonPromise"}}),P.prototype.then=function(e,t){var n=this;return new P(function(r,u){n.p.then(function(o){r(e?e(o):o)}).catch(function(o){return t?t(o):Promise.reject(o)}).then(r,u)})},P.prototype.catch=function(e){return this.then(function(){},e)},P.resolve=function(e){return new P(function(t){t(e)})},P.reject=function(e){return new P(function(t,n){n(e)})},P.all=function(e){return new P(function(t,n){Promise.all(e.map(function(r){return r!=null&&r.constructor&&"__typeson__type__"in r.constructor&&r.constructor.__typeson__type__==="TypesonPromise"?r.p:r})).then(t,n)})},P.race=function(e){return new P(function(t,n){Promise.race(e.map(function(r){return r!=null&&r.constructor&&"__typeson__type__"in r.constructor&&r.constructor.__typeson__type__==="TypesonPromise"?r.p:r})).then(t,n)})},P.allSettled=function(e){return new P(function(t,n){Promise.allSettled(e.map(function(r){return r!=null&&r.constructor&&"__typeson__type__"in r.constructor&&r.constructor.__typeson__type__==="TypesonPromise"?r.p:r})).then(t,n)})};var eu=Object.hasOwn,Xt=Object.getPrototypeOf;function fn(e,t){return zn(e)&&typeof e.then=="function"&&!t}function k(e){return Object.prototype.toString.call(e).slice(8,-1)}function K(e,t){if(!e||pe(e)!=="object")return!1;var n=Xt(e);if(!n)return t===null;var r=eu(n,"constructor")&&n.constructor;return typeof r!="function"?t===null:t===r||t!==null&&Function.prototype.toString.call(r)===Function.prototype.toString.call(t)||typeof t=="function"&&typeof r.__typeson__type__=="string"&&r.__typeson__type__===t.__typeson__type__}function tt(e){return!(!e||k(e)!=="Object")&&(!Xt(e)||K(e,Object))}function Xn(e){if(!e||k(e)!=="Object")return!1;var t=Xt(e);return!t||K(e,Object)||Xn(t)}function zn(e){return e!==null&&pe(e)==="object"}function It(e){return e.replaceAll("''","''''").replace(/^$/,"''").replaceAll("~","~0").replaceAll(".","~1")}function pt(e){return e.replaceAll("~1",".").replaceAll("~0","~").replace(/^''$/,"").replaceAll("''''","''")}function st(e,t){if(t==="")return e;if(e===null||pe(e)!=="object")throw new TypeError("Unexpected non-object type");var n=t.indexOf(".");if(n>-1){var r=e[pt(t.slice(0,n))];return r===void 0?void 0:st(r,t.slice(n+1))}return e[pt(t)]}function kt(e,t,n){if(t==="")return n;if(!e||pe(e)!=="object")throw new TypeError("Unexpected non-object type");var r=t.indexOf(".");return r>-1?kt(e[pt(t.slice(0,r))],t.slice(r+1),n):(e[pt(t)]=n,e)}function dn(e){return e===null?"null":Array.isArray(e)?"array":pe(e)}function St(e,t,n){return e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e}var Ot=Object.keys,Tt=Object.hasOwn,Me=Array.isArray,Dn=["type","replaced","iterateIn","iterateUnsetNumeric","addLength"];function _n(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(r){return Promise.reject(r)}}}function tu(e,t){var n,r;if(e.keypath==="")return-1;var u=(n=e.keypath.match(/\./g))!==null&&n!==void 0?n:0,o=(r=t.keypath.match(/\./g))!==null&&r!==void 0?r:0;return u&&(u=u.length),o&&(o=o.length),u>o?-1:u<o?1:e.keypath<t.keypath?-1:e.keypath>t.keypath?1:0}var Zn=function(){function e(t){Yt(this,e),this.options=t,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return Jt(e,[{key:"stringify",value:function(n,r,u,o){o=L(L(L({},this.options),o),{},{stringification:!0});var i=this.encapsulate(n,null,o);return Me(i)?JSON.stringify(i[0],r,u):i.then(function(a){return JSON.stringify(a,r,u)})}},{key:"stringifySync",value:function(n,r,u,o){return this.stringify(n,r,u,L(L({throwOnBadSyncType:!0},o),{},{sync:!0}))}},{key:"stringifyAsync",value:function(n,r,u,o){return this.stringify(n,r,u,L(L({throwOnBadSyncType:!0},o),{},{sync:!1}))}},{key:"parse",value:function(n,r,u){return u=L(L(L({},this.options),u),{},{parse:!0}),this.revive(JSON.parse(n,r),u)}},{key:"parseSync",value:function(n,r,u){return this.parse(n,r,L(L({throwOnBadSyncType:!0},u),{},{sync:!0}))}},{key:"parseAsync",value:function(n,r,u){return this.parse(n,r,L(L({throwOnBadSyncType:!0},u),{},{sync:!1}))}},{key:"specialTypeNames",value:function(n,r){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return u.returnTypeNames=!0,this.encapsulate(n,r,u)}},{key:"rootTypeName",value:function(n,r){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return u.iterateNone=!0,this.encapsulate(n,r,u)}},{key:"encapsulate",value:function(n,r,u){var o=this,i=L(L({sync:!0},this.options),u),a=i.sync,s={},l=[],f=[],c=[],d=!("cyclic"in i)||i.cyclic,h=i.encapsulateObserver,_=function(g){var p=Object.values(s);if(i.iterateNone)return p.length?p[0]:dn(g);if(p.length){if(i.returnTypeNames)return function(E){return function(O){if(Array.isArray(O))return qt(O)}(E)||function(O){if(typeof Symbol<"u"&&O[Symbol.iterator]!=null||O["@@iterator"]!=null)return Array.from(O)}(E)||Yn(E)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}(new Set(p));g&&tt(g)&&!Tt(g,"$types")?g.$types=s:g={$:g,$types:{$:s}}}else zn(g)&&Tt(g,"$types")&&(g={$:g,$types:!0});return!i.returnTypeNames&&g},y=_n(function(I,g){return St(Promise.all(g.map(function(p){return p[1].p})),function(p){return St(Promise.all(p.map(_n(function(w){var E=!1,S=[],O=Be(g.splice(0,1),1),x=Be(O[0],7),q=x[0],X=x[2],J=x[3],T=x[4],te=x[5],j=x[6],z=b(q,w,X,J,S,!0,j),le=K(z,P);return function(De,$e){var Ne=De();return Ne&&Ne.then?Ne.then($e):$e(Ne)}(function(){if(q&&le)return St(z.p,function(fe){T[te]=fe;var De=y(I,S);return E=!0,De})},function(fe){return E?fe:(q?T[te]=z:I=le?z.p:z,y(I,S))})}))),function(){return I})})}),C=function(g,p,w){Object.assign(g,p);var E=Dn.map(function(S){var O=g[S];return delete g[S],O});w(),Dn.forEach(function(S,O){g[S]=E[O]})},b=function I(g,p,w,E,S,O,x){var q,X={},J=pe(p),T=h?function(be){var Z,ye=(Z=x??E.type)!==null&&Z!==void 0?Z:dn(p);h(Object.assign(be??X,{keypath:g,value:p,cyclic:w,stateObj:E,promisesData:S,resolvingTypesonPromise:O,awaitingTypesonPromise:K(p,P)},{type:ye}))}:null;if(["string","boolean","number","undefined"].includes(J))return p===void 0||Number.isNaN(p)||p===Number.NEGATIVE_INFINITY||p===Number.POSITIVE_INFINITY||p===0?(q=E.replaced?p:A(g,p,E,S,!1,O,T))!==p&&(X={replaced:q}):q=p,T&&T(),q;if(p===null)return T&&T(),p;if(w&&!E.iterateIn&&!E.iterateUnsetNumeric&&p&&pe(p)==="object"){var te=l.indexOf(p);if(!(te<0))return s[g]="#",T&&T({cyclicKeypath:f[te]}),"#"+f[te];w===!0&&(l.push(p),f.push(g))}var j,z,le=tt(p),fe=Me(p),De=(le||fe)&&(!o.plainObjectReplacers.length||E.replaced)||E.iterateIn?p:A(g,p,E,S,le||fe,null,T);if(De!==p?(q=De,X={replaced:De}):g===""&&K(p,P)?(S.push([g,p,w,E,void 0,void 0,E.type]),q=p):fe&&E.iterateIn!=="object"||E.iterateIn==="array"?(j=new Array(p.length),X={clone:j}):(["function","symbol"].includes(pe(p))||"toJSON"in p||K(p,P)||K(p,Promise)||K(p,ArrayBuffer))&&!le&&E.iterateIn!=="object"?q=p:(j={},E.addLength&&(j.length=p.length),X={clone:j}),T&&T(),i.iterateNone)return(z=j)!==null&&z!==void 0?z:q;if(!j)return q;if(E.iterateIn){var $e=function(Z){var ye={ownKeys:Tt(p,Z)};C(E,ye,function(){var Oe=g+(g?".":"")+It(Z),Ye=I(Oe,p[Z],!!w,E,S,O);K(Ye,P)?S.push([Oe,Ye,!!w,E,j,Z,E.type]):Ye!==void 0&&(j[Z]=Ye)})};for(var Ne in p)$e(Ne);T&&T({endIterateIn:!0,end:!0})}else Ot(p).forEach(function(be){var Z=g+(g?".":"")+It(be);C(E,{ownKeys:!0},function(){var ye=I(Z,p[be],!!w,E,S,O);K(ye,P)?S.push([Z,ye,!!w,E,j,be,E.type]):ye!==void 0&&(j[be]=ye)})}),T&&T({endIterateOwn:!0,end:!0});if(E.iterateUnsetNumeric){for(var Ar=p.length,br=function(Z){if(!(Z in p)){var ye="".concat(g).concat(g?".":"").concat(Z);C(E,{ownKeys:!1},function(){var Oe=I(ye,void 0,!!w,E,S,O);K(Oe,P)?S.push([ye,Oe,!!w,E,j,Z,E.type]):Oe!==void 0&&(j[Z]=Oe)})}},wt=0;wt<Ar;wt++)br(wt);T&&T({endIterateUnsetNumeric:!0,end:!0})}return j},A=function(g,p,w,E,S,O,x){for(var q=S?o.plainObjectReplacers:o.nonplainObjectReplacers,X=q.length;X--;){var J=q[X];if(J.test(p,w)){var T=J.type;if(o.revivers[T]){var te=s[g];s[g]=te?[T].concat(te):T}if(Object.assign(w,{type:T,replaced:!0}),(a||!J.replaceAsync)&&!J.replace)return x&&x({typeDetected:!0}),b(g,p,d&&"readonly",w,E,O,T);x&&x({replacing:!0});var j=void 0;if(a||!J.replaceAsync){if(J.replace===void 0)throw new TypeError("Missing replacer");j=J.replace(p,w)}else j=J.replaceAsync(p,w);return b(g,j,d&&"readonly",w,E,O,T)}}return p},F=b("",n,d,r??{},c);if(c.length)return a&&i.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(y(F,c)).then(_);if(!a&&i.throwOnBadSyncType)throw new TypeError("Async method requested but sync result obtained");return i.stringification&&a?[_(F)]:a?_(F):Promise.resolve(_(F))}},{key:"encapsulateSync",value:function(n,r,u){return this.encapsulate(n,r,L(L({throwOnBadSyncType:!0},u),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(n,r,u){return this.encapsulate(n,r,L(L({throwOnBadSyncType:!0},u),{},{sync:!1}))}},{key:"revive",value:function(n,r){var u=this,o=L(L({sync:!0},this.options),r),i=o.sync;function a(b){if(i)return b;if(o.throwOnBadSyncType)throw new TypeError("Async method requested but sync result obtained");return Promise.resolve(b)}if(!n||pe(n)!=="object"||Array.isArray(n))return a(n);var s=n.$types;if(s===!0)return a(n.$);if(!s||pe(s)!=="object"||Array.isArray(s))return a(n);var l=[],f={},c=!0;s.$&&tt(s.$)&&(n=n.$,s=s.$,c=!1);var d=function(A,F){var I,g=Be((I=u.revivers[A])!==null&&I!==void 0?I:[],1)[0];if(!g)throw new Error("Unregistered type: "+A);if(i&&!("revive"in g))return F;if(!i&&g.reviveAsync)return g.reviveAsync(F,f);if(g.revive)return g.revive(F,f);throw new Error("Missing reviver")},h=[];function _(b){return K(b,ht)?void 0:b}var y,C=function(){var A=[];if(!s)throw new Error("Found bad `types`");if(Object.entries(s).forEach(function(F){var I=Be(F,2),g=I[0],p=I[1];p!=="#"&&[].concat(p).forEach(function(w){var E;Be((E=u.revivers[w])!==null&&E!==void 0?E:[null,{}],2)[1].plain&&(A.push({keypath:g,type:w}),delete s[g])})}),A.length)return A.sort(tu).reduce(function F(I,g){var p=g.keypath,w=g.type;if(fn(I))return I.then(function(O){return F(O,{keypath:p,type:w})});var E=st(n,p);if(K(E=d(w,E),P))return E.then(function(O){var x=kt(n,p,O);x===O&&(n=x)});var S=kt(n,p,E);S===E&&(n=S)},void 0)}();return K(C,P)?y=C.then(function(){return n}):(y=function b(A,F,I,g,p){if(!c||A!=="$types"){var w=s[A],E=Me(F);if(E||tt(F)){var S=E?new Array(F.length):{};for(Ot(F).forEach(function(j){var z=b(A+(A?".":"")+It(j),F[j],I??S,S,j),le=function(De){return K(De,ht)?S[j]=void 0:De!==void 0&&(S[j]=De),De};K(z,P)?h.push(z.then(function(fe){return le(fe)})):le(z)}),F=S;l.length;){var O=Be(l[0],4),x=O[0],q=O[1],X=O[2],J=O[3],T=st(x,q);if(T===void 0)break;X[J]=T,l.splice(0,1)}}if(!w)return F;if(w==="#"){var te=st(I,F.slice(1));return te===void 0&&l.push([I,F.slice(1),g,p]),te}return[].concat(w).reduce(function j(z,le){if(K(z,P))return z.then(function(fe){return j(fe,le)});if(typeof le!="string")throw new TypeError("Bad type JSON");return d(le,z)},F)}}("",n,null),h.length&&(y=P.resolve(y).then(function(b){return P.all([b].concat(h))}).then(function(b){return Be(b,1)[0]}))),fn(y)?i&&o.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():K(y,P)?y.p.then(_):y:!i&&o.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():i?_(y):Promise.resolve(_(y))}},{key:"reviveSync",value:function(n,r){return this.revive(n,L(L({throwOnBadSyncType:!0},r),{},{sync:!0}))}},{key:"reviveAsync",value:function(n,r){return this.revive(n,L(L({throwOnBadSyncType:!0},r),{},{sync:!1}))}},{key:"register",value:function(n,r){var u=this,o=r??{},i=function a(s){Me(s)?s.forEach(function(l){return a(l)}):Ot(s).forEach(function(l){var f;if(l==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(nu.includes(l))throw new TypeError("Plain JSON object types are reserved as type names");var c=s[l],d=c&&typeof c!="function"&&!Array.isArray(c)&&c.testPlainObjects?u.plainObjectReplacers:u.nonplainObjectReplacers,h=d.filter(function(F){return F.type===l});if(h.length&&(d.splice(d.indexOf(h[0]),1),delete u.revivers[l],delete u.types[l]),typeof c=="function"){var _=c;c={test:function(I){return I&&I.constructor===_},replace:function(I){return L({},I)},revive:function(I){return Object.assign(Object.create(_.prototype),I)}}}else if(Me(c)){var y=Be(c,3);c={test:y[0],replace:y[1],revive:y[2]}}if((f=c)!==null&&f!==void 0&&f.test){var C={type:l,test:c.test.bind(c)};c.replace&&(C.replace=c.replace.bind(c)),c.replaceAsync&&(C.replaceAsync=c.replaceAsync.bind(c));var b=typeof o.fallback=="number"?o.fallback:o.fallback?0:Number.POSITIVE_INFINITY;if(c.testPlainObjects?u.plainObjectReplacers.splice(b,0,C):u.nonplainObjectReplacers.splice(b,0,C),c.revive||c.reviveAsync){var A={};c.revive&&(A.revive=c.revive.bind(c)),c.reviveAsync&&(A.reviveAsync=c.reviveAsync.bind(c)),u.revivers[l]=[A,{plain:c.testPlainObjects}]}u.types[l]=c}})};return[].concat(n).forEach(function(a){return i(a)}),this}}]),e}(),ht=Jt(function e(){Yt(this,e)});ht.__typeson__type__="TypesonUndefined";for(var nu=["null","boolean","number","string","array","object"],Ke="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ve=new Uint8Array(256),nt=0;nt<64;nt++)Ve[Ke.codePointAt(nt)]=nt;var zt=function(t,n,r){r==null&&(r=t.byteLength);for(var u=new Uint8Array(t,0,r),o=u.length,i="",a=0;a<o;a+=3)i+=Ke[u[a]>>2],i+=Ke[(3&u[a])<<4|u[a+1]>>4],i+=Ke[(15&u[a+1])<<2|u[a+2]>>6],i+=Ke[63&u[a+2]];return o%3==2?i=i.slice(0,-1)+"=":o%3==1&&(i=i.slice(0,-2)+"=="),i},Zt=function(t,n){var r=t.length;if(r%4)throw new Error("Bad base64 length: not divisible by four");var u,o,i,a,s=.75*t.length,l=0;t[t.length-1]==="="&&(s--,t[t.length-2]==="="&&s--);for(var f=new ArrayBuffer(s,n),c=new Uint8Array(f),d=0;d<r;d+=4)u=Ve[t.codePointAt(d)],o=Ve[t.codePointAt(d+1)],i=Ve[t.codePointAt(d+2)],a=Ve[t.codePointAt(d+3)],c[l++]=u<<2|o>>4,c[l++]=(15&o)<<4|i>>2,c[l++]=(3&i)<<6|63&a;return f};const ru={arraybuffer:{test:e=>k(e)==="ArrayBuffer",replace(e,t){t.buffers||(t.buffers=[]);const n=t.buffers.indexOf(e);return n>-1?{index:n}:(t.buffers.push(e),{s:zt(e),maxByteLength:e.maxByteLength})},revive(e,t){if(t.buffers||(t.buffers=[]),Object.hasOwn(e,"index"))return t.buffers[e.index];const n=Zt(e.s,{maxByteLength:e.maxByteLength});return t.buffers.push(n),n}}},uu={bigintObject:{test:e=>typeof e=="object"&&K(e,BigInt),replace:String,revive:e=>new Object(BigInt(e))}},ou={bigint:{test:e=>typeof e=="bigint",replace:String,revive:e=>BigInt(e)}};function er(e){return new Uint8Array(e).reduce((t,n)=>t+String.fromCodePoint(n),"")}function tr(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer}const iu={blob:{test:e=>k(e)==="Blob",replace(e){const t=new XMLHttpRequest;if(t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("GET",URL.createObjectURL(e),!1),t.send(),t.status!==200&&t.status!==0)throw new Error("Bad Blob access: "+t.status);return{type:e.type,stringContents:t.responseText}},revive(e){const{type:t,stringContents:n}=e;return new Blob([tr(n)],{type:t})},replaceAsync:e=>new P((t,n)=>{const r=new FileReader;r.addEventListener("load",()=>{t({type:e.type,stringContents:er(r.result)})}),r.addEventListener("error",()=>{n(r.error)}),r.readAsArrayBuffer(e)})}},au={cryptokey:{test:e=>k(e)==="CryptoKey"&&e.extractable,replaceAsync:e=>new P(async(t,n)=>{let r;try{r=await crypto.subtle.exportKey("jwk",e)}catch(u){return void n(u)}t({jwk:r,algorithm:e.algorithm,usages:e.usages})}),revive(e){const{jwk:t,algorithm:n,usages:r}=e;return crypto.subtle.importKey("jwk",t,n,!0,r)}}},su={dataview:{test:e=>k(e)==="DataView",replace({buffer:e,byteOffset:t,byteLength:n},r){r.buffers||(r.buffers=[]);const u=r.buffers.indexOf(e);return u>-1?{index:u,byteOffset:t,byteLength:n}:(r.buffers.push(e),{encoded:zt(e),maxByteLength:e.maxByteLength,byteOffset:t,byteLength:n})},revive(e,t){t.buffers||(t.buffers=[]);const{byteOffset:n,byteLength:r,encoded:u,index:o,maxByteLength:i}=e;let a;return"index"in e?a=t.buffers[o]:(a=Zt(u,i===void 0?i:{maxByteLength:i}),t.buffers.push(a)),new DataView(a,n,r)}}},cu={date:{test:e=>k(e)==="Date",replace(e){const t=e.getTime();return Number.isNaN(t)?"NaN":t},revive:e=>e==="NaN"?new Date(Number.NaN):new Date(e)}},lu={domexception:{test:e=>k(e)==="DOMException",replace:e=>({name:e.name,message:e.message}),revive:({message:e,name:t})=>new DOMException(e,t)}},nr={};function pn(e){nr[e.name.toLowerCase()]={test:t=>k(t)===e.name,replace:t=>t.is2D?{a:t.a,b:t.b,c:t.c,d:t.d,e:t.e,f:t.f}:{m11:t.m11,m12:t.m12,m13:t.m13,m14:t.m14,m21:t.m21,m22:t.m22,m23:t.m23,m24:t.m24,m31:t.m31,m32:t.m32,m33:t.m33,m34:t.m34,m41:t.m41,m42:t.m42,m43:t.m43,m44:t.m44},revive:t=>Object.hasOwn(t,"a")?new e([t.a,t.b,t.c,t.d,t.e,t.f]):new e([t.m11,t.m12,t.m13,t.m14,t.m21,t.m22,t.m23,t.m24,t.m31,t.m32,t.m33,t.m34,t.m41,t.m42,t.m43,t.m44])}}typeof DOMMatrix<"u"&&pn(DOMMatrix),typeof DOMMatrixReadOnly<"u"&&pn(DOMMatrixReadOnly);const rr={};function hn(e){rr[e.name.toLowerCase()]={test:t=>k(t)===e.name,replace:t=>({x:t.x,y:t.y,z:t.z,w:t.w}),revive:({x:t,y:n,z:r,w:u})=>new e(t,n,r,u)}}typeof DOMPoint<"u"&&hn(DOMPoint),typeof DOMPointReadOnly<"u"&&hn(DOMPointReadOnly);const fu={domquad:{test:e=>k(e)==="DOMQuad",replace:e=>({p1:e.p1,p2:e.p2,p3:e.p3,p4:e.p4}),revive:({p1:e,p2:t,p3:n,p4:r})=>new DOMQuad(e,t,n,r)}},ur={};function yn(e){ur[e.name.toLowerCase()]={test:t=>k(t)===e.name,replace:t=>({x:t.x,y:t.y,width:t.width,height:t.height}),revive:({x:t,y:n,width:r,height:u})=>new e(t,n,r,u)}}typeof DOMRect<"u"&&yn(DOMRect),typeof DOMRectReadOnly<"u"&&yn(DOMRectReadOnly);const du={error:{test:e=>k(e)==="Error",replace:({name:e,message:t,cause:n,stack:r,fileName:u,lineNumber:o,columnNumber:i})=>({name:e,message:t,cause:n,stack:r,fileName:u,lineNumber:o,columnNumber:i}),revive(e){const t=new Error(e.message);return t.name=e.name,t.cause=e.cause,t.stack=e.stack,t.fileName=e.fileName,t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}}},or={};function Nt(e){or[e.name.toLowerCase()]={test:t=>K(t,e),replace:({name:t,message:n,cause:r,stack:u,fileName:o,lineNumber:i,columnNumber:a,errors:s})=>({name:t,message:n,cause:r,stack:u,fileName:o,lineNumber:i,columnNumber:a,errors:s}),revive(t){const n=typeof AggregateError<"u"&&e===AggregateError?new e(t.errors,t.message):new e(t.message);return n.name=t.name,n.cause=t.cause,n.stack=t.stack,n.fileName=t.fileName,n.lineNumber=t.lineNumber,n.columnNumber=t.columnNumber,n}}}[TypeError,RangeError,SyntaxError,ReferenceError,EvalError,URIError].forEach(e=>Nt(e)),typeof AggregateError<"u"&&Nt(AggregateError),typeof InternalError=="function"&&Nt(InternalError);const ir={file:{test:e=>k(e)==="File",replace(e){const t=new XMLHttpRequest;if(t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("GET",URL.createObjectURL(e),!1),t.send(),t.status!==200&&t.status!==0)throw new Error("Bad File access: "+t.status);return{type:e.type,stringContents:t.responseText,name:e.name,lastModified:e.lastModified}},revive:({name:e,type:t,stringContents:n,lastModified:r})=>new File([tr(n)],e,{type:t,lastModified:r}),replaceAsync:e=>new P(function(t,n){const r=new FileReader;r.addEventListener("load",function(){t({type:e.type,stringContents:er(r.result),name:e.name,lastModified:e.lastModified})}),r.addEventListener("error",function(){n(r.error)}),r.readAsArrayBuffer(e)})}},Du={file:ir.file,filelist:{test:e=>k(e)==="FileList",replace(e){const t=[];for(let n=0;n<e.length;n++)t[n]=e.item(n);return t},revive(e){class t{constructor(){this._files=arguments[0],this.length=this._files.length}item(r){return this._files[r]}get[Symbol.toStringTag](){return"FileList"}}return new t(e)}}},_u={imagebitmap:{test:e=>k(e)==="ImageBitmap"||e&&e.dataset&&e.dataset.toStringTag==="ImageBitmap",replace(e){const t=document.createElement("canvas");return t.getContext("2d").drawImage(e,0,0),{width:e.width,height:e.height,dataURL:t.toDataURL()}},revive(e){const t=typeof OffscreenCanvas>"u"?document.createElement("canvas"):new OffscreenCanvas(e.width,e.height),n=t.getContext("2d"),r=document.createElement("img");return r.addEventListener("load",function(){n.drawImage(r,0,0)}),r.src=e.dataURL,typeof OffscreenCanvas>"u"?t:t.transferToImageBitmap()},reviveAsync(e){const t=document.createElement("canvas"),n=t.getContext("2d"),r=document.createElement("img");return r.addEventListener("load",function(){n.drawImage(r,0,0)}),r.src=e.dataURL,new P(async(u,o)=>{try{u(await createImageBitmap(t))}catch(i){o(i)}})}}},pu={imagedata:{test:e=>k(e)==="ImageData",replace:e=>({array:[...e.data],width:e.width,height:e.height}),revive:e=>new ImageData(new Uint8ClampedArray(e.array),e.width,e.height)}},hu={infinity:{test:e=>e===Number.POSITIVE_INFINITY,replace:()=>"Infinity",revive:()=>Number.POSITIVE_INFINITY}},yu={map:{test:e=>k(e)==="Map",replace:e=>[...e.entries()],revive:e=>new Map(e)}},Eu={nan:{test:e=>Number.isNaN(e),replace:()=>"NaN",revive:()=>Number.NaN}},gu={negativeInfinity:{test:e=>e===Number.NEGATIVE_INFINITY,replace:()=>"-Infinity",revive:()=>Number.NEGATIVE_INFINITY}},mu={negativeZero:{test:e=>Object.is(e,-0),replace:()=>0,revive:()=>-0}},Au={StringObject:{test:e=>k(e)==="String"&&typeof e=="object",replace:String,revive:e=>new String(e)},BooleanObject:{test:e=>k(e)==="Boolean"&&typeof e=="object",replace:e=>e.valueOf(),revive:e=>new Boolean(e)},NumberObject:{test:e=>k(e)==="Number"&&typeof e=="object",replace:Number,revive:e=>new Number(e)}},bu={regexp:{test:e=>k(e)==="RegExp",replace:e=>({source:e.source,flags:(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":"")}),revive:({source:e,flags:t})=>new RegExp(e,t)}},Cu={set:{test:e=>k(e)==="Set",replace:e=>[...e.values()],revive:e=>new Set(e)}},Fu={};typeof Int8Array=="function"&&[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,...typeof BigInt64Array=="function"?[BigInt64Array,BigUint64Array]:[]].forEach(e=>function(n){const r=n.name;Fu[r.toLowerCase()]={test:u=>k(u)===r,replace:u=>(u.byteOffset===0&&u.byteLength===u.buffer.byteLength?u:u.slice(0)).buffer,revive:u=>k(u)==="ArrayBuffer"?new n(u):u}}(e));const ar={};typeof Int8Array=="function"&&[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,...typeof BigInt64Array=="function"?[BigInt64Array,BigUint64Array]:[]].forEach(e=>function(n){const r=n.name;ar[r.toLowerCase()]={test:u=>k(u)===r,replace({buffer:u,byteOffset:o,length:i},a){a.buffers||(a.buffers=[]);const s=a.buffers.indexOf(u);return s>-1?{index:s,byteOffset:o,length:i}:(a.buffers.push(u),{maxByteLength:u.maxByteLength,encoded:zt(u),byteOffset:o,length:i})},revive(u,o){o.buffers||(o.buffers=[]);const{byteOffset:i,length:a,encoded:s,index:l,maxByteLength:f}=u;let c;return"index"in u?c=o.buffers[l]:(c=Zt(s,f===void 0?void 0:{maxByteLength:f}),o.buffers.push(c)),new n(c,i,a)}}}(e));const vu={undef:{test:(e,t)=>e===void 0&&(t.ownKeys||!("ownKeys"in t)),replace:()=>0,revive:()=>new ht}},Bu={userObject:{test:e=>Xn(e),replace:e=>({...e}),revive:e=>e}},wu=[{arrayNonindexKeys:{testPlainObjects:!0,test:(e,t)=>!!Array.isArray(e)&&(Object.keys(e).some(n=>String(Number.parseInt(n))!==n)&&(t.iterateIn="object",t.addLength=!0),!0),replace:(e,t)=>(t.iterateUnsetNumeric=!0,e),revive(e){if(Array.isArray(e))return e;const t=[];return Object.entries(e).forEach(([n,r])=>{t[n]=r}),t}}},{sparseUndefined:{test:(e,t)=>e===void 0&&t.ownKeys===!1,replace:()=>0,revive(){}}}],Iu=[Eu,hu,gu,mu],Su=[Bu,vu,wu,Au,Iu,cu,bu,pu,_u,ir,Du,iu,du,or].concat(typeof Map=="function"?yu:[],typeof Set=="function"?Cu:[],typeof ArrayBuffer=="function"?ru:[],typeof Uint8Array=="function"?ar:[],typeof DataView=="function"?su:[],typeof crypto<"u"?au:[],typeof BigInt<"u"?[ou,uu]:[],typeof DOMException<"u"?lu:[],typeof DOMRect<"u"?ur:[],typeof DOMPoint<"u"?rr:[],typeof DOMQuad<"u"?fu:[],typeof DOMMatrix<"u"?nr:[]),sr=Su.concat({checkDataCloneException:{test(e){const t={}.toString.call(e).slice(8,-1);if(["symbol","function"].includes(typeof e)||["Arguments","Module","Promise","WeakMap","WeakSet","Event","MessageChannel"].includes(t)||e&&typeof e=="object"&&typeof e.nodeType=="number"&&typeof e.insertBefore=="function")throw new DOMException("The object cannot be cloned.","DataCloneError");return!1}}});let en=new Zn().register(sr);function cr(e){en=new Zn().register(e(sr))}function Re(e,t){let n;try{n=en.stringifySync(e)}catch(r){throw K(r,ReferenceError)||K(r,at)?m("DataCloneError","The object cannot be cloned."):r}return t&&t(n),n}function ke(e){return en.parse(e)}function yt(e){return ke(Re(e))}const Ou=Object.freeze(Object.defineProperty({__proto__:null,clone:yt,decode:ke,encode:Re,register:cr},Symbol.toStringTag,{value:"Module"})),lr=["objectStore","keyPath","multiEntry","unique"];function N(){throw new TypeError("Illegal constructor")}const xt=N;N.__createInstance=function(e,t){function n(){const r=this;r[Symbol.toStringTag]="IDBIndex",Te(r,lr),r.__objectStore=e,r.__name=r.__originalName=t.columnName,r.__keyPath=Array.isArray(t.keyPath)?t.keyPath.slice():t.keyPath;const{optionalParams:u}=t;r.__multiEntry=!!(u&&u.multiEntry),r.__unique=!!(u&&u.unique),r.__deleted=!!t.__deleted,r.__objectStore.__cursors=t.cursors||[],Object.defineProperty(r,"__currentName",{get(){return"__pendingName"in r?r.__pendingName:r.name}}),Object.defineProperty(r,"name",{enumerable:!1,configurable:!1,get(){return this.__name},set(o){const i=this;o=Vt(o);const a=i.name;if(B.__assertVersionChange(i.objectStore.transaction),B.__assertActive(i.objectStore.transaction),xt.__invalidStateIfDeleted(i),v.__invalidStateIfDeleted(i),o===a)return;if(i.objectStore.__indexes[o]&&!i.objectStore.__indexes[o].__deleted&&!i.objectStore.__indexes[o].__pendingDelete)throw m("ConstraintError",'Index "'+o+'" already exists on '+i.objectStore.__currentName);i.__name=o;const{objectStore:s}=i;delete s.__indexes[a],s.__indexes[o]=i,s.indexNames.splice(s.indexNames.indexOf(a),1,o);const l=s.transaction.__storeHandles[s.name],f=l.__indexHandles[a];f.__name=o,l.__indexHandles[o]=f,i.__pendingName=a;const c=[["key","BLOB "+(s.autoIncrement?"UNIQUE, inc INTEGER PRIMARY KEY AUTOINCREMENT":"PRIMARY KEY")],["value","BLOB"]].concat([...s.indexNames].filter(d=>d!==o).map(d=>[_e(d),"BLOB"]));i.__renameIndex(s,a,o,c,function(d,h){xt.__updateIndexList(e,d,function(_){delete l.__pendingName,h(_)})})}})}return n.prototype=xt.prototype,new n};N.__invalidStateIfDeleted=function(e,t){if(e.__deleted||e.__pendingDelete||e.__pendingCreate&&e.objectStore.transaction&&e.objectStore.transaction.__errored)throw m("InvalidStateError",t||"This index has been deleted")};N.__clone=function(e,t){const n=N.__createInstance(t,{columnName:e.name,keyPath:e.keyPath,optionalParams:{multiEntry:e.multiEntry,unique:e.unique}});return["__pendingCreate","__pendingDelete","__deleted","__originalName","__recreated"].forEach(r=>{n[r]=e[r]}),n};N.__createIndex=function(e,t){const n=t.name,r=e.__currentName,u=e.__indexes[n];t.__pendingCreate=!0,e.indexNames.push(n),e.__indexes[n]=t;let o=e.__indexHandles[n];(!o||t.__pendingDelete||t.__deleted||o.__pendingDelete||o.__deleted)&&(o=e.__indexHandles[n]=N.__clone(t,e));const{transaction:i}=e;i.__addNonRequestToTransactionQueue(function(s,l,f,c){const d=u&&(u.__deleted||u.__recreated);let h={};function _(F,I){c(m("UnknownError",'Could not create index "'+n+'"'+I.code+"::"+I.message,I))}function y(F){N.__updateIndexList(e,F,function(){F.executeSql('SELECT "key", "value" FROM '+W(r),[],function(I,g){D.DEBUG&&console.log("Adding existing "+r+" records to the "+n+" index"),p(0);function p(w){if(w<g.rows.length)try{const E=ke(Ae(g.rows.item(w).value)),S=We(E,t.keyPath,t.multiEntry);if("invalid"in S&&S.invalid||"failure"in S&&S.failure)throw new Error("Go to catch; ignore bad indexKey");const O=R(S.value,t.multiEntry);if(t.unique){if(h[O]){h={},c(m("ConstraintError","Duplicate values already exist within the store"));return}h[O]=!0}I.executeSql("UPDATE "+W(r)+" SET "+_e(n)+' = ? WHERE "key" = ?',[Y(O),g.rows.item(w).key],function(){p(w+1)},_)}catch{p(w+1)}else delete t.__pendingCreate,delete o.__pendingCreate,t.__deleted&&(delete t.__deleted,delete o.__deleted,t.__recreated=!0,o.__recreated=!0),h={},f(e)}},_)},_)}const C=W(r),b=_e(t.name);function A(F){if(!D.useSQLiteIndexes){y(F);return}F.executeSql('CREATE INDEX IF NOT EXISTS "'+C.slice(1,-1)+"^5"+b.slice(1,-1)+'" ON '+C+"("+b+")",[],y,_)}if(d)y(s);else{const F=["ALTER TABLE",C,"ADD",b,"BLOB"].join(" ");D.DEBUG&&console.log(F),s.executeSql(F,[],A,_)}})};N.__deleteIndex=function(e,t){t.__pendingDelete=!0;const n=e.__indexHandles[t.name];n&&(n.__pendingDelete=!0),e.indexNames.splice(e.indexNames.indexOf(t.name),1);const{transaction:r}=e;r.__addNonRequestToTransactionQueue(function(o,i,a,s){function l(c,d){s(m("UnknownError",'Could not delete index "'+t.name+'"',d))}function f(){N.__updateIndexList(e,o,function(c){delete t.__pendingDelete,delete t.__recreated,t.__deleted=!0,n&&(n.__deleted=!0,delete n.__pendingDelete),a(c)},l)}if(!D.useSQLiteIndexes){f();return}o.executeSql("DROP INDEX IF EXISTS "+Q(W(e.name).slice(1,-1)+"^5"+_e(t.name).slice(1,-1)),[],f,l)})};N.__updateIndexList=function(e,t,n,r){const u={};for(let o=0;o<e.indexNames.length;o++){const i=e.__indexes[e.indexNames[o]];u[i.name]={columnName:i.name,keyPath:i.keyPath,optionalParams:{unique:i.unique,multiEntry:i.multiEntry},deleted:!!i.__deleted}}D.DEBUG&&console.log("Updating the index list for "+e.__currentName,u),t.executeSql('UPDATE __sys__ SET "indexList" = ? WHERE "name" = ?',[JSON.stringify(u),Y(e.__currentName)],function(){n(e)},r)};N.prototype.__fetchIndexData=function(e,t,n,r){const u=this;if(r!==void 0&&(r=Ct(r,"unsigned long")),N.__invalidStateIfDeleted(u),v.__invalidStateIfDeleted(u.objectStore),u.objectStore.__deleted)throw m("InvalidStateError","This index's object store has been deleted");if(B.__assertActive(u.objectStore.transaction),n&&we(e))throw m("DataError","No key or range was specified");const o=dr(n,u,e,t,!1);return u.objectStore.transaction.__addToTransactionQueue(function(...i){fr(r,...o,...i)},void 0,u)};N.prototype.openCursor=function(){const e=this,[t,n]=arguments,r=de.__createInstance(t,n,e.objectStore,e,At(e.name),"value");return e.__objectStore.__cursors.push(r),r.__request};N.prototype.openKeyCursor=function(){const e=this,[t,n]=arguments,r=U.__createInstance(t,n,e.objectStore,e,At(e.name),"key");return e.__objectStore.__cursors.push(r),r.__request};N.prototype.get=function(e){if(!arguments.length)throw new TypeError("A parameter was missing for `IDBIndex.get`.");return this.__fetchIndexData(e,"value",!0)};N.prototype.getKey=function(e){if(!arguments.length)throw new TypeError("A parameter was missing for `IDBIndex.getKey`.");return this.__fetchIndexData(e,"key",!0)};N.prototype.getAll=function(){const[e,t]=arguments;return this.__fetchIndexData(e,"value",!1,t)};N.prototype.getAllKeys=function(){const[e,t]=arguments;return this.__fetchIndexData(e,"key",!1,t)};N.prototype.count=function(){const e=this,t=arguments[0];return Kt(t,G)?de.__createInstance(t,"next",e.objectStore,e,At(e.name),"value",!0).__request:e.__fetchIndexData(t,"count",!1)};N.prototype.__renameIndex=function(e,t,n,r=[],u=null){const o="BLOB",i=e.__currentName,a=W(i),s=_e(n),l=Q("tmp_"+W(i).slice(1,-1)),f=r.map(_=>_[0]),c=r.map(_=>_.join(" ")),d=c.length?c.join(", ")+", ":"",h=f.length?f.join(", ")+", ":"";e.transaction.__addNonRequestToTransactionQueue(function(y,C,b,A){function F(p,w){A(w)}function I(){if(u){u(y,b);return}b()}const g="CREATE TABLE "+l+"("+d+s+" "+o+")";D.DEBUG&&console.log(g),y.executeSql(g,[],function(){const p="INSERT INTO "+l+"("+h+s+") SELECT "+h+_e(t)+" FROM "+a;D.DEBUG&&console.log(p),y.executeSql(p,[],function(){const w="DROP TABLE "+a;D.DEBUG&&console.log(w),y.executeSql(w,[],function(){const E="ALTER TABLE "+l+" RENAME TO "+a;D.DEBUG&&console.log(E),y.executeSql(E,[],function(S){if(!D.useSQLiteIndexes){I();return}const O=f.slice(2).map(x=>new V(function(q,X){const T="CREATE INDEX "+Q(a.slice(1,-1)+"^5"+x.slice(1,-1))+" ON "+a+"("+x+")";D.DEBUG&&console.log(T),S.executeSql(T,[],q,function(te,j){X(j)})}));O.push(new V(function(x,q){const X=Q("sk_"+a.slice(1,-1)),J="DROP INDEX IF EXISTS "+X;D.DEBUG&&console.log(J),S.executeSql(J,[],function(){const T="CREATE INDEX "+X+" ON "+a+'("key")';D.DEBUG&&console.log(T),S.executeSql(T,[],x,function(te,j){q(j)})},function(T,te){q(te)})})),V.all(O).then(I,A).catch(x=>{throw console.log("Index rename error"),x})},F)},F)},F)},F)})};Object.defineProperty(N,Symbol.hasInstance,{value:e=>se(e)&&"openCursor"in e&&typeof e.openCursor=="function"&&"multiEntry"in e&&typeof e.multiEntry=="boolean"});Se(N.prototype,lr);Le(N.prototype,["name"]);N.prototype[Symbol.toStringTag]="IDBIndexPrototype";Object.defineProperty(N,"prototype",{writable:!1});function fr(e,t,n,r,u,o,i,a,s,l,f,c,d){t&&(e=1),e&&a.push("LIMIT",String(e));const h=o==="count";D.DEBUG&&console.log("Trying to fetch data for Index",a.join(" "),s),l.executeSql(a.join(" "),s,function(_,y){const C=[];let b=0;const A=h?()=>{}:o==="key"?F=>he(Ae(F.key)):F=>ke(Ae(F.value));if(n.multiEntry){const F=At(n.name),I=R(u,n.multiEntry);for(let g=0;g<y.rows.length;g++){const p=y.rows.item(g),w=he(p[F]);let E;if(r&&Mn(JSON.stringify(I).slice(1,-1),p[F])?(b++,E=p):!r&&!i&&w!==void 0&&(b+=Array.isArray(w)?w.length:1,E=p),E&&(C.push(A(E)),t))break}}else{for(let F=0;F<y.rows.length;F++){const I=y.rows.item(F);I&&C.push(A(I))}b=C.length}c(h?b:b===0?t?void 0:[]:t?C[0]:C)},d)}function dr(e,t,n,r,u){const o=e||!we(n),a=["SELECT",Q(r==="count"?"key":r)+(t.multiEntry?", "+_e(t.name):""),"FROM",W(t.objectStore.__currentName),"WHERE",_e(t.name),"NOT NULL"],s=[];if(o)if(u)a.push("AND ("),n.forEach((l,f)=>{f>0&&a.push("OR"),a.push(_e(t.name),"LIKE ? ESCAPE '^' "),s.push("%"+it(R(l,t.multiEntry))+"%")}),a.push(")");else if(t.multiEntry)a.push("AND",_e(t.name),"LIKE ? ESCAPE '^'"),Array.isArray(n)?s.push("%"+it(JSON.stringify(R(n,t.multiEntry)).slice(1,-1))+"%"):s.push("%"+it(R(n,t.multiEntry))+"%");else{const l=vt(n,e);Ft(l,_e(t.name),a,s,!0,!1)}return[e,t,o,n,r,u,a,s]}const Dr=["keyPath","indexNames","transaction","autoIncrement"];function v(){throw new TypeError("Illegal constructor")}const En=v;v.__createInstance=function(e,t){function n(){const r=this;r[Symbol.toStringTag]="IDBObjectStore",Te(this,Dr),r.__name=r.__originalName=e.name,r.__keyPath=Array.isArray(e.keyPath)?e.keyPath.slice():e.keyPath,r.__transaction=t,r.__idbdb=e.idbdb,r.__cursors=e.cursors||[],r.__autoIncrement=!!e.autoInc,r.__indexes={},r.__indexHandles={},r.__indexNames=ee.__createInstance();const{indexList:u}=e;for(const o in u)if(Object.hasOwn(u,o)){const i=N.__createInstance(r,u[o]);r.__indexes[i.name]=i,i.__deleted||r.indexNames.push(i.name)}r.__oldIndexNames=r.indexNames.clone(),Object.defineProperty(this,"__currentName",{get(){return"__pendingName"in this?this.__pendingName:this.name}}),Object.defineProperty(this,"name",{enumerable:!1,configurable:!1,get(){return this.__name},set(o){const i=this;o=Vt(o);const a=i.name;if(En.__invalidStateIfDeleted(i),B.__assertVersionChange(i.transaction),B.__assertActive(i.transaction),a===o)return;if(i.__idbdb.__objectStores[o]&&!i.__idbdb.__objectStores[o].__pendingDelete)throw m("ConstraintError",'Object store "'+o+'" already exists in '+i.__idbdb.name);i.__name=o;const s=i.__idbdb.__objectStores[a];s.__name=o,i.__idbdb.__objectStores[o]=s,delete i.__idbdb.__objectStores[a],i.__idbdb.objectStoreNames.splice(i.__idbdb.objectStoreNames.indexOf(a),1,o);const l=i.transaction.__storeHandles[a];l.__name=o,i.transaction.__storeHandles[o]=l,i.__pendingName=a;const f='UPDATE __sys__ SET "name" = ? WHERE "name" = ?',c=[Y(o),Y(a)];D.DEBUG&&console.log(f,c),i.transaction.__addNonRequestToTransactionQueue(function(h,_,y,C){h.executeSql(f,c,function(b){const A="ALTER TABLE "+W(a)+" RENAME TO "+W(o);D.DEBUG&&console.log(A),b.executeSql(A,[],function(){delete i.__pendingName,y()})},function(b,A){return C(A),!1})})}})}return n.prototype=En.prototype,new n};v.__clone=function(e,t){const n=v.__createInstance({name:e.__currentName,keyPath:Array.isArray(e.keyPath)?e.keyPath.slice():e.keyPath,autoInc:e.autoIncrement,indexList:{},idbdb:e.__idbdb,cursors:e.__cursors},t);return["__indexes","__indexNames","__oldIndexNames","__deleted","__pendingDelete","__pendingCreate","__originalName"].forEach(r=>{n[r]=e[r]}),n};v.__invalidStateIfDeleted=function(e,t){if(e.__deleted||e.__pendingDelete||e.__pendingCreate&&"transaction"in e&&e.transaction&&e.transaction.__errored)throw m("InvalidStateError",t||"This store has been deleted")};v.__createObjectStore=function(e,t){const n=t.__currentName;t.__pendingCreate=!0,e.__objectStores[n]=t,e.objectStoreNames.push(n);const r=e.__versionTransaction,u=r.__storeHandles;return(!u[n]||u[n].__pendingDelete||u[n].__deleted)&&(u[n]=v.__clone(t,r)),r.__addNonRequestToTransactionQueue(function(i,a,s,l){function f(h,_){return D.DEBUG&&console.log(_),l(m("UnknownError",'Could not create object store "'+n+'"',_)),!1}const c=W(n),d=["CREATE TABLE",c,"(key BLOB",t.autoIncrement?"UNIQUE, inc INTEGER PRIMARY KEY AUTOINCREMENT":"PRIMARY KEY",", value BLOB)"].join(" ");D.DEBUG&&console.log(d),i.executeSql(d,[],function(h){function _(){const y=JSON.stringify(t.keyPath);h.executeSql("INSERT INTO __sys__ VALUES (?,?,?,?,?)",[Y(n),y,Number(t.autoIncrement),"{}",1],function(){delete t.__pendingCreate,delete t.__deleted,s(t)},f)}if(!D.useSQLiteIndexes){_();return}h.executeSql("CREATE INDEX IF NOT EXISTS "+Q("sk_"+c.slice(1,-1))+" ON "+c+'("key")',[],_,f)},f)}),u[n]};v.__deleteObjectStore=function(e,t){t.__pendingDelete=!0,t.__indexNames=ee.__createInstance(),e.objectStoreNames.splice(e.objectStoreNames.indexOf(t.__currentName),1);const n=e.__versionTransaction.__storeHandles[t.__currentName];n&&(n.__indexNames=ee.__createInstance(),n.__pendingDelete=!0),e.__versionTransaction.__addNonRequestToTransactionQueue(function(o,i,a,s){function l(f,c){return D.DEBUG&&console.log(c),s(m("UnknownError","Could not delete ObjectStore",c)),!1}o.executeSql('SELECT "name" FROM __sys__ WHERE "name" = ?',[Y(t.__currentName)],function(f,c){c.rows.length>0&&f.executeSql("DROP TABLE "+W(t.__currentName),[],function(){f.executeSql('DELETE FROM __sys__ WHERE "name" = ?',[Y(t.__currentName)],function(){delete t.__pendingDelete,t.__deleted=!0,n&&(delete n.__pendingDelete,n.__deleted=!0),a()},l)},l)})})};v.prototype.__validateKeyAndValueAndCloneValue=function(e,t,n){const r=this;if(r.keyPath!==null){if(t!==void 0)throw m("DataError","The object store uses in-line keys and the key parameter was provided");const o=yt(e);if(t=We(o,r.keyPath),t.invalid)throw m("DataError","KeyPath was specified, but key was invalid.");if(t.failure){if(!n){if(!r.autoIncrement)throw m("DataError","Could not evaluate a key from keyPath and there is no key generator");if(!Un(o,r.keyPath))throw m("DataError","A key could not be injected into a value");return[void 0,o]}throw m("DataError","Could not evaluate a key from keyPath")}return[t.value,o]}if(t===void 0){if(!r.autoIncrement)throw m("DataError","The object store uses out-of-line keys and has no key generator and the key parameter was not provided.");t=void 0}else me(t);const u=yt(e);return[t,u]};v.prototype.__deriveKey=function(e,t,n,r,u){const o=this;function i(a){Re(n,function(s){s=ke(s),r(s,a)})}o.autoIncrement?n===void 0?Hn(e,o,function(a,s,l){if(a){u(m("ConstraintError","The key generator's current number has reached the maximum safe integer limit"));return}o.keyPath!==null&&kn(t,s,o.keyPath),r(s,l)},u):Qn(e,o,n,i,u):i()};v.prototype.__insertData=function(e,t,n,r,u,o,i){const a=this,s={},l=Object.keys(a.__indexes).map(f=>new V((c,d)=>{const h=a.__indexes[f];if(h.__pendingCreate||h.__deleted){c(void 0);return}let _;try{if(_=We(n,h.keyPath,h.multiEntry),"invalid"in _&&_.invalid||"failure"in _&&_.failure)throw new Error("Go to catch")}catch{c(void 0);return}_=_.value;function y(C){_!==void 0&&(s[C.__currentName]=R(_,C.multiEntry))}if(h.unique){const C=h.multiEntry&&Array.isArray(_),b=dr(!0,h,_,"key",C);fr(null,...b,e,null,function(F){if(F===void 0){y(h),c(void 0);return}d(m("ConstraintError","Index already contains a record equal to "+(C?"one of the subkeys of":"")+"`indexKey`"))},d)}else y(h),c(void 0)}));return V.all(l).then(()=>{const f=["INSERT INTO",W(a.__currentName),"("],c=[" VALUES ("],d=[];r!==void 0&&(f.push(Q("key"),","),c.push("?,"),d.push(Y(R(r)))),Object.entries(s).forEach(([_,y])=>{f.push(_e(_)+","),c.push("?,"),d.push(Y(y))}),f.push(Q("value")+" )"),c.push("?)"),d.push(Y(t));const h=f.join(" ")+c.join(" ");D.DEBUG&&console.log("SQL for adding",h,d),e.executeSql(h,d,function(){o(r)},function(_,y){return i(m("ConstraintError",y.message,y)),!1})}).catch(function(f){function c(){i(f)}return typeof u=="number"?($t(e,a,u,c,c),null):(c(),null)})};v.prototype.add=function(e){const t=this,n=arguments[1];if(!(t instanceof v))throw new TypeError("Illegal invocation");if(arguments.length===0)throw new TypeError("No value was specified");v.__invalidStateIfDeleted(t),B.__assertActive(t.transaction),t.transaction.__assertWritable();const r=t.transaction.__createRequest(t),[u,o]=t.__validateKeyAndValueAndCloneValue(e,n,!1);return v.__storingRecordObjectStore(r,t,!0,o,!0,u),r};v.prototype.put=function(e){const t=this,n=arguments[1];if(!(t instanceof v))throw new TypeError("Illegal invocation");if(arguments.length===0)throw new TypeError("No value was specified");v.__invalidStateIfDeleted(t),B.__assertActive(t.transaction),t.transaction.__assertWritable();const r=t.transaction.__createRequest(t),[u,o]=t.__validateKeyAndValueAndCloneValue(e,n,!1);return v.__storingRecordObjectStore(r,t,!0,o,!1,u),r};v.prototype.__overwrite=function(e,t,n,r){const o="DELETE FROM "+W(this.__currentName)+' WHERE "key" = ?',i=R(t);e.executeSql(o,[Y(i)],function(a,s){D.DEBUG&&console.log("Did the row with the",t,"exist?",s.rowsAffected),n(a)},function(a,s){return r(s),!1})};v.__storingRecordObjectStore=function(e,t,n,r,u){const o=arguments[5];t.transaction.__pushToQueue(e,function(i,a,s,l){t.__deriveKey(i,r,o,function(f,c){Re(r,function(d){function h(_){t.__insertData(_,d,r,f,c,function(...y){n&&t.__cursors.forEach(C=>{C.__invalidateCache()}),s(...y)},l)}if(!u){t.__overwrite(i,f,h,l);return}h(i)})},l)})};v.prototype.__get=function(e,t,n,r){const u=this;r!==void 0&&(r=Ct(r,"unsigned long")),v.__invalidStateIfDeleted(u),B.__assertActive(u.transaction);const o=vt(e,!n),a=["SELECT",Q(t?"key":"value"),"FROM",W(u.__currentName)],s=[];if(o!==void 0&&(a.push("WHERE"),Ft(o,Q("key"),a,s)),n||(r=1),r){if(!Number.isFinite(r))throw new TypeError("The count parameter must be a finite number");a.push("LIMIT",String(r))}const l=a.join(" ");return u.transaction.__addToTransactionQueue(function(c,d,h,_){D.DEBUG&&console.log("Fetching",u.__currentName,s),c.executeSql(l,s,function(y,C){D.DEBUG&&console.log("Fetched data",C);let b;try{if(C.rows.length===0){n?h([]):h();return}if(b=[],t)for(let A=0;A<C.rows.length;A++)b.push(he(Ae(C.rows.item(A).key),!1));else for(let A=0;A<C.rows.length;A++)b.push(ke(Ae(C.rows.item(A).value)));n||(b=b[0])}catch(A){D.DEBUG&&console.log(A)}h(b)},function(y,C){return _(C),!1})},void 0,u)};v.prototype.get=function(e){if(!arguments.length)throw new TypeError("A parameter was missing for `IDBObjectStore.get`.");return this.__get(e)};v.prototype.getKey=function(e){if(!arguments.length)throw new TypeError("A parameter was missing for `IDBObjectStore.getKey`.");return this.__get(e,!0)};v.prototype.getAll=function(){const[e,t]=arguments;return this.__get(e,!1,!0,t)};v.prototype.getAllKeys=function(){const[e,t]=arguments;return this.__get(e,!0,!0,t)};v.prototype.delete=function(e){const t=this;if(!(this instanceof v))throw new TypeError("Illegal invocation");if(!arguments.length)throw new TypeError("A parameter was missing for `IDBObjectStore.delete`.");v.__invalidStateIfDeleted(t),B.__assertActive(t.transaction),t.transaction.__assertWritable();const n=vt(e,!0),r=["DELETE FROM",W(t.__currentName),"WHERE"],u=[];Ft(n,Q("key"),r,u);const o=r.join(" ");return t.transaction.__addToTransactionQueue(function(a,s,l,f){D.DEBUG&&console.log("Deleting",t.__currentName,u),a.executeSql(o,u,function(c,d){D.DEBUG&&console.log("Deleted from database",d.rowsAffected),t.__cursors.forEach(h=>{h.__invalidateCache()}),l()},function(c,d){return f(d),!1})},void 0,t)};v.prototype.clear=function(){const e=this;if(!(this instanceof v))throw new TypeError("Illegal invocation");return v.__invalidStateIfDeleted(e),B.__assertActive(e.transaction),e.transaction.__assertWritable(),e.transaction.__addToTransactionQueue(function(n,r,u,o){n.executeSql("DELETE FROM "+W(e.__currentName),[],function(i,a){D.DEBUG&&console.log("Cleared all records from database",a.rowsAffected),e.__cursors.forEach(s=>{s.__invalidateCache()}),u()},function(i,a){return o(a),!1})},void 0,e)};v.prototype.count=function(){const e=this,t=arguments[0];if(!(e instanceof v))throw new TypeError("Illegal invocation");return v.__invalidStateIfDeleted(e),B.__assertActive(e.transaction),de.__createInstance(t,"next",e,e,"key","value",!0).__request};v.prototype.openCursor=function(){const e=this,[t,n]=arguments;if(!(e instanceof v))throw new TypeError("Illegal invocation");v.__invalidStateIfDeleted(e);const r=de.__createInstance(t,n,e,e,"key","value");return e.__cursors.push(r),r.__request};v.prototype.openKeyCursor=function(){const e=this;if(!(e instanceof v))throw new TypeError("Illegal invocation");v.__invalidStateIfDeleted(e);const[t,n]=arguments,r=U.__createInstance(t,n,e,e,"key","key");return e.__cursors.push(r),r.__request};v.prototype.index=function(e){const t=this;if(!(t instanceof v))throw new TypeError("Illegal invocation");if(arguments.length===0)throw new TypeError("No index name was specified");v.__invalidStateIfDeleted(t),B.__assertNotFinished(t.transaction);const n=t.__indexes[e];if(!n||n.__deleted)throw m("NotFoundError",'Index "'+e+'" does not exist on '+t.__currentName);return(!t.__indexHandles[e]||t.__indexes[e].__pendingDelete||t.__indexes[e].__deleted)&&(t.__indexHandles[e]=N.__clone(n,t)),t.__indexHandles[e]};v.prototype.createIndex=function(e,t){const n=this;let r=arguments[2];if(!(n instanceof v))throw new TypeError("Illegal invocation");if(e=String(e),arguments.length===0)throw new TypeError("No index name was specified");if(arguments.length===1)throw new TypeError("No key path was specified");if(B.__assertVersionChange(n.transaction),v.__invalidStateIfDeleted(n),B.__assertActive(n.transaction),n.__indexes[e]&&!n.__indexes[e].__deleted&&!n.__indexes[e].__pendingDelete)throw m("ConstraintError",'Index "'+e+'" already exists on '+n.__currentName);if(t=Gt(t),!Fn(t))throw m("SyntaxError","A valid keyPath must be supplied");if(Array.isArray(t)&&r&&r.multiEntry)throw m("InvalidAccessError","The keyPath argument was an array and the multiEntry option is true.");r=r||{};const u={columnName:e,keyPath:t,optionalParams:{unique:!!r.unique,multiEntry:!!r.multiEntry}},o=N.__createInstance(n,u);return N.__createIndex(n,o),o};v.prototype.deleteIndex=function(e){const t=this;if(!(t instanceof v))throw new TypeError("Illegal invocation");if(arguments.length===0)throw new TypeError("No index name was specified");B.__assertVersionChange(t.transaction),v.__invalidStateIfDeleted(t),B.__assertActive(t.transaction);const n=t.__indexes[e];if(!n)throw m("NotFoundError",'Index "'+e+'" does not exist on '+t.__currentName);N.__deleteIndex(t,n)};Se(v.prototype,Dr);Le(v.prototype,["name"]);v.prototype[Symbol.toStringTag]="IDBObjectStorePrototype";Object.defineProperty(v,"prototype",{writable:!1});const Et={},_r=["onabort","onclose","onerror","onversionchange"],pr=["name","version","objectStoreNames"];function H(){throw this.__versionTransaction=null,this.__objectStores=null,this.__transactions=[],new TypeError("Illegal constructor")}const Tu=H;H.__createInstance=function(e,t,n,r,u){function o(){this[Symbol.toStringTag]="IDBDatabase",Te(this,pr),this.__db=e,this.__closePending=!1,this.__oldVersion=n,this.__version=r,this.__name=t,this.__upgradeTransaction=null,bt(this,_r),this.__setOptions({legacyOutputDidListenersThrowFlag:!0}),this.__transactions=[],this.__objectStores={},this.__objectStoreNames=ee.__createInstance();const i={};for(let a=0;a<u.rows.length;a++){const s=u.rows.item(a);i.name=s.name,i.keyPath=JSON.parse(s.keyPath),["autoInc","indexList"].forEach(f=>{i[f]=JSON.parse(s[f])}),i.idbdb=this;const l=v.__createInstance(i);this.__objectStores[l.name]=l,this.objectStoreNames.push(l.name)}this.__oldObjectStoreNames=this.objectStoreNames.clone()}return o.prototype=Tu.prototype,new o};H.prototype=gt.createInstance();H.prototype[Symbol.toStringTag]="IDBDatabasePrototype";H.prototype.createObjectStore=function(e){let t=arguments[1];if(e=String(e),!(this instanceof H))throw new TypeError("Illegal invocation");if(arguments.length===0)throw new TypeError("No object store name was specified");B.__assertVersionChange(this.__versionTransaction),this.throwIfUpgradeTransactionNull(),B.__assertActive(this.__versionTransaction),t={...t};let{keyPath:n}=t;if(n=n===void 0?null:Gt(n),n!==null&&!Fn(n))throw m("SyntaxError","The keyPath argument contains an invalid key path.");if(this.__objectStores[e]&&!this.__objectStores[e].__pendingDelete)throw m("ConstraintError",'Object store "'+e+'" already exists in '+this.name);const r=t.autoIncrement;if(r&&(n===""||Array.isArray(n)))throw m("InvalidAccessError","With autoIncrement set, the keyPath argument must not be an array or empty string.");const u={name:e,keyPath:n,autoInc:r,indexList:{},idbdb:this},o=v.__createInstance(u,this.__versionTransaction);return v.__createObjectStore(this,o)};H.prototype.deleteObjectStore=function(e){if(!(this instanceof H))throw new TypeError("Illegal invocation");if(arguments.length===0)throw new TypeError("No object store name was specified");B.__assertVersionChange(this.__versionTransaction),this.throwIfUpgradeTransactionNull(),B.__assertActive(this.__versionTransaction);const t=this.__objectStores[e];if(!t)throw m("NotFoundError",'Object store "'+e+'" does not exist in '+this.name);v.__deleteObjectStore(this,t)};H.prototype.close=function(){if(!(this instanceof H))throw new TypeError("Illegal invocation");this.__closePending=!0,this.__unblocking&&this.__unblocking.check(),this.__transactions=[]};H.prototype.transaction=function(e){if(arguments.length===0)throw new TypeError("You must supply a valid `storeNames` to `IDBDatabase.transaction`");let t=arguments[1];if(e=Cn(e)?[...new Set(Gt(e))].sort():[Vt(e)],t=t||"readonly",B.__assertNotVersionChange(this.__versionTransaction),this.__closePending)throw m("InvalidStateError","An attempt was made to start a new transaction on a database connection that is not open");const n=ee.__createInstance();if(e.forEach(u=>{if(!this.objectStoreNames.contains(u))throw m("NotFoundError",'The "'+u+'" object store does not exist');n.push(u)}),e.length===0)throw m("InvalidAccessError","No valid object store names were specified");if(t!=="readonly"&&t!=="readwrite")throw new TypeError("Invalid transaction mode: "+t);const r=B.__createInstance(this,n,t);return this.__transactions.push(r),r};H.prototype.throwIfUpgradeTransactionNull=function(){if(this.__upgradeTransaction===null)throw m("InvalidStateError","No upgrade transaction associated with database.")};H.prototype.__forceClose=function(e){const t=this;t.close();let n=0;t.__transactions.forEach(function(r){r.on__abort=function(){if(n++,n===t.__transactions.length){const u=ae("close");setTimeout(()=>{t.dispatchEvent(u)})}},r.__abortTransaction(m("AbortError","The connection was force-closed: "+(e||"")))}),t.__transactions=[]};Le(H.prototype,_r);Se(H.prototype,pr);Object.defineProperty(H.prototype,"constructor",{enumerable:!1,writable:!0,configurable:!0,value:H});Object.defineProperty(H,"prototype",{writable:!1});let Ut;const Nu=e=>{Ut=e},Bt=()=>typeof location!="object"||!location?"null":location.origin,tn=()=>D.checkOrigin!==!1&&Bt()==="null",Pe={};function hr(e,t=Bt()){const n=Pe[t][e];if(!n[0])return;const{req:r,cb:u}=n[0];function o(){n.shift(),hr(e,t)}r.addEventListener("success",o),r.addEventListener("error",o),r.addEventListener("blocked",o),u(r)}function yr(e,t,n=Bt(),r){Pe[n][t]||(Pe[n][t]=[]),Pe[n][t].push({req:e,cb:r}),Pe[n][t].length===1&&hr(t,n)}function Er(e,t,n,r){const u=i=>i.__closePending,o=()=>e.every(i=>u(i));return e.reduce(function(i,a){return u(a)?i:i.then(function(){if(u(a))return;const s=new ce("versionchange",{oldVersion:n,newVersion:r});return new V(function(l){setTimeout(()=>{a.dispatchEvent(s),l(void 0)})})})},V.resolve(void 0)).then(function(){if(!o())return new V(function(i){const a={check(){o()&&i(void 0)}},s=new ce("blocked",{oldVersion:n,newVersion:r});setTimeout(()=>{t.dispatchEvent(s),o()?i(void 0):e.forEach(l=>{u(l)||(l.__unblocking=a)})})})})}const ne={};let Fe,xu=0;function gr(e){return Object.keys(ne[e]).map(Number).reduce((t,n)=>n>t?n:t,0)}function Pu(e){return ne[e]&&ne[e][gr(e)]}function mr(e,t,n,r,u){if(typeof D.memoryDatabase=="string"){const a=ne[t]?Pu(t):null;if(!a){console.warn("Could not find a memory database instance to delete."),r();return}const s=a._db&&a._db._db;if(!s||!s.close){console.error("The `openDatabase` implementation does not have the expected `._db._db.close` method for closing the database");return}s.close(l=>{if(l){console.warn("Error closing (destroying) memory database");return}r()});return}if(Ut&&D.deleteDatabaseFiles!==!1){Ut.unlink(Et.join(D.databaseBasePath||"",n),a=>{if(a&&a.code!=="ENOENT"){u({code:0,message:"Error removing database file: "+n+" "+a});return}r()});return}e(Et.join(D.databaseBasePath||"",n),"1",t,D.DEFAULT_DB_SIZE).transaction(function(a){a.executeSql('SELECT "name" FROM __sys__',[],function(s,l){const f=l.rows;(function c(d){d>=f.length?s.executeSql("DROP TABLE IF EXISTS __sys__",[],function(){r()},u):s.executeSql("DROP TABLE "+W(Ae(f.item(d).name)),[],function(){c(d+1)},function(){return c(d+1),!1})})(0)},function(){return r(),!1})})}function nn(e,t,n){function r(u,o){const i=Qe(o||u);D.DEBUG&&console.log("Error in sysdb transaction - when creating dbVersions",o),n(i)}Fe?t():(Fe=e(typeof D.memoryDatabase=="string"?D.memoryDatabase:Et.join(typeof D.sysDatabaseBasePath=="string"?D.sysDatabaseBasePath:D.databaseBasePath||"","__sysdb__"+(D.addSQLiteExtension!==!1?".sqlite":"")),"1","System Database",D.DEFAULT_DB_SIZE),Fe.transaction(function(u){u.executeSql("CREATE TABLE IF NOT EXISTS dbVersions (name BLOB, version INT);",[],function(o){if(!D.useSQLiteIndexes){t();return}o.executeSql("CREATE INDEX IF NOT EXISTS dbvname ON dbVersions(name)",[],t,r)},r)},r))}function ue(){throw new TypeError("Illegal constructor")}const ju=ue;ue.__createInstance=function(){function e(){this[Symbol.toStringTag]="IDBFactory",this.__connections={}}return e.prototype=ju.prototype,new e};ue.prototype.open=function(e){const t=this;if(!(t instanceof ue))throw new TypeError("Illegal invocation");let n=arguments[1];if(arguments.length===0)throw new TypeError("Database name is required");if(n!==void 0&&(n=Ct(n,"unsigned long long"),n===0))throw new TypeError("Version cannot be 0");if(tn())throw m("SecurityError","Cannot open an IndexedDB database from an opaque origin.");const r=ge.__createInstance();let u=!1;D.autoName&&e===""&&(e="autoNamedDatabase_"+xu++),e=String(e);const o=Y(e),i=typeof D.memoryDatabase=="string",a=D.cacheDatabaseInstances!==!1||i;let s;try{s=bn(e)}catch(d){throw d}function l(d,h){if(u)return!1;const _=h?Qe(h):d;u=!0;const y=ae("error",_,{bubbles:!0,cancelable:!0});return r.__done=!0,r.__error=_,r.__result=void 0,r.dispatchEvent(y),!1}function f(d,h,_){d.executeSql('SELECT "name", "keyPath", "autoInc", "indexList" FROM __sys__',[],function(y,C){function b(){r.__result=A,r.__done=!0}const A=H.__createInstance(h,e,_,n,C);if(t.__connections[e]||(t.__connections[e]=[]),t.__connections[e].push(A),_<n){const F=t.__connections[e].slice(0,-1);Er(F,r,_,n).then(function(){let I=function(g,p,w){if(p){try{g.executeSql("ROLLBACK",[],w,w)}catch{Fe.transaction(function(S){function O(x){throw new Error("Unable to roll back upgrade transaction!"+(x||""))}_===0?S.executeSql('DELETE FROM dbVersions WHERE "name" = ?',[o],function(){w(O)},O):S.executeSql('UPDATE dbVersions SET "version" = ? WHERE "name" = ?',[_,o],w,O)})}return}w()};Fe.transaction(function(g){function p(){const w=new ce("upgradeneeded",{oldVersion:_,newVersion:n});r.__result=A,A.__upgradeTransaction=r.__transaction=r.__result.__versionTransaction=B.__createInstance(r.__result,r.__result.objectStoreNames,"versionchange"),r.__done=!0,r.transaction.__addNonRequestToTransactionQueue(function(S,O,x){if(r.dispatchEvent(w),w.__legacyOutputDidListenersThrowError){je("Error","An error occurred in an upgradeneeded handler attached to request chain",w.__legacyOutputDidListenersThrowError),r.transaction.__abortTransaction(m("AbortError","A request was aborted."));return}x()}),r.transaction.on__beforecomplete=function(E){A.__upgradeTransaction=null,r.__result.__versionTransaction=null,I(g,!1,function(){return r.transaction.__transFinishedCb(!1,function(){E.complete(),r.__transaction=null}),!1})},r.transaction.on__preabort=function(){A.__upgradeTransaction=null,a&&e in ne&&delete ne[e][n]},r.transaction.on__abort=function(){r.__transaction=null,r.__result=void 0,r.__done=!1,A.close(),setTimeout(()=>{const E=m("AbortError","The upgrade transaction was aborted.");I(g,E,function(S){return _===0?(mr(t.__openDatabase,e,s,l.bind(null,E),S||l),!1):(l(E),!1)})})},r.transaction.on__complete=function(){const E=A.__transactions.indexOf(r.transaction);if(E>-1&&A.__transactions.splice(E,1),r.__result.__closePending){r.__transaction=null;const O=m("AbortError","The connection has been closed.");l(O);return}b(),r.__transaction=null;const S=ae("success");r.dispatchEvent(S)}}_===0?g.executeSql("INSERT INTO dbVersions VALUES (?,?)",[o,n],p,l):g.executeSql('UPDATE dbVersions SET "version" = ? WHERE "name" = ?',[n,o],p,l)},l,void 0,function(g,p,w,E,S){return g.readOnly||p?!0:(I=function(O,x,q){x?E(x,q):S(q)},!1)})}).catch(I=>{throw console.log("Error within `triggerAnyVersionChangeAndBlockedEvents`"),I})}else{b();const F=ae("success");r.dispatchEvent(F)}},l)}function c(d){let h;if((i||a)&&e in ne&&ne[e][n]?h=ne[e][n]:(h=t.__openDatabase(i?D.memoryDatabase:Et.join(D.databaseBasePath||"",s),"1",e,D.DEFAULT_DB_SIZE),a&&(e in ne||(ne[e]={}),ne[e][n]=h)),n===void 0&&(n=d||1),d>n){const _=m("VersionError","An attempt was made to open a database using a lower version than the existing version.",n);a?setTimeout(()=>{l(_)}):l(_);return}h.transaction(function(_){_.executeSql("CREATE TABLE IF NOT EXISTS __sys__ (name BLOB, keyPath BLOB, autoInc BOOLEAN, indexList BLOB, currNum INTEGER)",[],function(){function y(){f(_,h,d)}if(!D.createIndexes){y();return}_.executeSql("CREATE INDEX IF NOT EXISTS sysname ON __sys__(name)",[],y,l)},l)},l)}return yr(r,e,void 0,function(){let d;a&&(e in ne||(ne[e]={}),d=gr(e)),d?c(d):nn(t.__openDatabase,function(){Fe.readTransaction(function(h){h.executeSql('SELECT "version" FROM dbVersions WHERE "name" = ?',[o],function(_,y){y.rows.length===0?c(0):c(y.rows.item(0).version)},l)},l)},l)}),r};ue.prototype.deleteDatabase=function(e){const t=this;if(!(t instanceof ue))throw new TypeError("Illegal invocation");if(arguments.length===0)throw new TypeError("Database name is required");if(tn())throw m("SecurityError","Cannot delete an IndexedDB database from an opaque origin.");e=String(e);const n=Y(e);let r;try{r=bn(e)}catch(c){throw c}const u=typeof D.memoryDatabase=="string",o=D.cacheDatabaseInstances!==!1||u,i=ge.__createInstance();let a=!1,s=0,l=function(c,d){d(c)};function f(c,d){if(a||d===!0)return!1;const h=Qe(d||c);return l(!0,function(){i.__done=!0,i.__error=h,i.__result=void 0;const _=ae("error",h,{bubbles:!0,cancelable:!0});i.dispatchEvent(_),a=!0}),!1}return yr(i,e,void 0,function(c){nn(t.__openDatabase,function(){function d(){c.__result=void 0,c.__done=!0;const _=new ce("success",{oldVersion:s,newVersion:null});c.dispatchEvent(_)}function h(){l(!1,function(){o&&e in ne&&delete ne[e],delete t.__connections[e],d()})}Fe.readTransaction(function(_){_.executeSql('SELECT "version" FROM dbVersions WHERE "name" = ?',[n],function(y,C){if(C.rows.length===0){d();return}({version:s}=C.rows.item(0));const b=t.__connections[e]||[];Er(b,c,s,null).then(function(){Fe.transaction(function(A){A.executeSql('DELETE FROM dbVersions WHERE "name" = ? ',[n],function(){mr(t.__openDatabase,e,r,h,f)},f)},f,void 0,function(A,F,I,g,p){return A.readOnly||F?!0:(l=function(w,E){w?g(w,E):p(E)},!1)})},f)},f)})},f)}),i};ue.prototype.cmp=function(e,t){if(!(this instanceof ue))throw new TypeError("Illegal invocation");if(arguments.length<2)throw new TypeError("You must provide two keys to be compared");return me(e),me(t),Ie(e,t)};ue.prototype.databases=function(){const e=this;let t=!1;return new Promise(function(n,r){if(!(e instanceof ue))throw new TypeError("Illegal invocation");if(tn())throw m("SecurityError","Cannot get IndexedDB database names from an opaque origin.");function u(o,i){if(t)return!1;const a=i?Qe(i):o;return t=!0,r(a),!1}nn(e.__openDatabase,function(){Fe.readTransaction(function(o){o.executeSql('SELECT "name", "version" FROM dbVersions',[],function(i,a){const s=[];for(let l=0;l<a.rows.length;l++){const{name:f,version:c}=a.rows.item(l);s.push({name:Ae(f),version:c})}n(s)},u)},u)},u)})};ue.prototype.__forceClose=function(e,t,n){const r=this;function u(o){o.__forceClose(n)}if(we(e))Object.values(r.__connections).forEach(o=>{o.forEach(i=>{u(i)})});else if(!r.__connections[e])console.log("No database connections with that name to force close");else if(we(t))r.__connections[e].forEach(o=>{u(o)});else{if(!Number.isInteger(t)||t<0||t>r.__connections[e].length-1)throw new TypeError("If providing an argument, __forceClose must be called with a numeric index to indicate a specific connection to close");u(r.__connections[e][t])}};ue.prototype.__setConnectionQueueOrigin=function(e=Bt()){Pe[e]={}};ue.prototype[Symbol.toStringTag]="IDBFactoryPrototype";Object.defineProperty(ue,"prototype",{writable:!1});const rt=ue.__createInstance();function U(){throw new TypeError("Illegal constructor")}const gn=U;U.__super=function(t,n,r,u,o,i,a){this[Symbol.toStringTag]="IDBCursor",Te(this,["key","primaryKey","request"]),v.__invalidStateIfDeleted(r),this.__indexSource=Kt(u,N),this.__indexSource&&N.__invalidStateIfDeleted(u),B.__assertActive(r.transaction);const s=vt(t);if(n!==void 0&&!["next","prev","nextunique","prevunique"].includes(n))throw new TypeError(n+"is not a valid cursor direction");Object.defineProperties(this,{source:{writable:!1,value:u},direction:{writable:!1,value:n||"next"}}),this.__key=void 0,this.__primaryKey=void 0,this.__store=r,this.__range=s,this.__request=$.__createInstance(),this.__request.__source=u,this.__request.__transaction=this.__store.transaction,this.__keyColumnName=o,this.__valueColumnName=i,this.__keyOnly=i==="key",this.__valueDecoder=this.__keyOnly?Wr:Ou,this.__count=a,this.__prefetchedIndex=-1,this.__multiEntryIndex=this.__indexSource?"multiEntry"in u&&u.multiEntry:!1,this.__unique=this.direction.includes("unique"),this.__sqlDirection=["prev","prevunique"].includes(this.direction)?"DESC":"ASC",s!==void 0&&(s.__lowerCached=s.lower!==void 0&&R(s.lower,this.__multiEntryIndex),s.__upperCached=s.upper!==void 0&&R(s.upper,this.__multiEntryIndex)),this.__gotValue=!0,this.continue()};U.__createInstance=function(...e){const t=gn.__super;return t.prototype=gn.prototype,new t(...e)};U.prototype.__find=function(...e){if(this.__multiEntryIndex){const[t,n,r,u,o]=e;this.__findMultiEntry(t,n,r,u,o)}else{const[t,n,r,u,o,i]=e;this.__findBasic(t,n,r,u,o,i)}};U.prototype.__findBasic=function(e,t,n,r,u,o){const i=o!==void 0;o=o||1;const a=this,s=Q(a.__keyColumnName),l=Q("key"),f=["SELECT * FROM",W(a.__store.__currentName)],c=[];f.push("WHERE",s,"NOT NULL"),Ft(a.__range,s,f,c,!0,!0);const d=a.__sqlDirection,h=d==="ASC"?">":"<";t!==void 0&&(f.push("AND",l,h+"= ?"),c.push(R(t))),e!==void 0?(f.push("AND",s,h+"= ?"),c.push(R(e))):i&&a.__key!==void 0&&(f.push("AND",s,h+" ?"),c.push(R(a.__key))),a.__count||(f.push("ORDER BY",s,d),a.__keyColumnName!=="key"&&(a.__unique?a.direction==="prevunique"&&f.push(",",l,"ASC"):f.push(",",l,d)),!a.__unique&&a.__indexSource&&f.push(",",Q(a.__valueColumnName),d),f.push("LIMIT",String(o)));const _=f.join(" ");D.DEBUG&&console.log(_,c),n.executeSql(_,c,function(y,C){a.__count?r(void 0,C.rows.length,void 0):C.rows.length>1?(a.__prefetchedIndex=0,a.__prefetchedData=C.rows,D.DEBUG&&console.log("Preloaded "+a.__prefetchedData.length+" records for cursor"),a.__decode(C.rows.item(0),r)):C.rows.length===1?a.__decode(C.rows.item(0),r):(D.DEBUG&&console.log("Reached end of cursors"),r(void 0,void 0,void 0))},function(y,C){return D.DEBUG&&console.log("Could not execute Cursor.continue",_,c),u(C),!1})};const ut=/\[/gu;U.prototype.__findMultiEntry=function(e,t,n,r,u){const o=this;if(o.__prefetchedData&&o.__prefetchedData.length===o.__prefetchedIndex){D.DEBUG&&console.log("Reached end of multiEntry cursor"),r(void 0,void 0,void 0);return}const i=Q(o.__keyColumnName),a=["SELECT * FROM",W(o.__store.__currentName)],s=[];a.push("WHERE",i,"NOT NULL"),o.__range&&o.__range.lower!==void 0&&Array.isArray(o.__range.upper)&&o.__range.upper.indexOf(o.__range.lower)===0&&(a.push("AND",i,"LIKE ? ESCAPE '^'"),s.push("%"+it(o.__range.__lowerCached.slice(0,-1))+"%"));const l=o.__sqlDirection,f=l==="ASC"?">":"<",c=Q("key");t!==void 0&&(a.push("AND",c,f+"= ?"),s.push(R(t))),e!==void 0?(a.push("AND",i,f+"= ?"),s.push(R(e))):o.__key!==void 0&&(a.push("AND",i,f+" ?"),s.push(R(o.__key))),o.__count||(a.push("ORDER BY",i,l),!o.__unique&&o.__keyColumnName!=="key"&&a.push(",",Q("key"),l),!o.__unique&&o.__indexSource&&a.push(",",Q(o.__valueColumnName),l));const d=a.join(" ");D.DEBUG&&console.log(d,s),n.executeSql(d,s,function(h,_){if(_.rows.length>0){if(o.__count){let b=0;for(let A=0;A<_.rows.length;A++){const F=_.rows.item(A),I=he(F[o.__keyColumnName],!0),g=_t(I,o.__range);b+=g.length}r(void 0,b,void 0);return}const y=[];for(let b=0;b<_.rows.length;b++){const A=_.rows.item(b),F=he(A[o.__keyColumnName],!0),I=_t(F,o.__range);for(const g of I){const p={matchingKey:R(g,!0),key:A.key};p[o.__keyColumnName]=A[o.__keyColumnName],p[o.__valueColumnName]=A[o.__valueColumnName],y.push(p)}}const C=o.direction.indexOf("prev")===0;y.sort(function(b,A){return b.matchingKey.replaceAll(ut,"z")<A.matchingKey.replaceAll(ut,"z")?C?1:-1:b.matchingKey.replaceAll(ut,"z")>A.matchingKey.replaceAll(ut,"z")?C?-1:1:b.key<A.key?o.direction==="prev"?1:-1:b.key>A.key?o.direction==="prev"?-1:1:0}),y.length>1?(o.__prefetchedIndex=0,o.__prefetchedData={data:y,length:y.length,item(b){return this.data[b]}},D.DEBUG&&console.log("Preloaded "+o.__prefetchedData.length+" records for multiEntry cursor"),o.__decode(y[0],r)):y.length===1?(D.DEBUG&&console.log("Reached end of multiEntry cursor"),o.__decode(y[0],r)):(D.DEBUG&&console.log("Reached end of multiEntry cursor"),r(void 0,void 0,void 0))}else D.DEBUG&&console.log("Reached end of multiEntry cursor"),r(void 0,void 0,void 0)},function(h,_){return D.DEBUG&&console.log("Could not execute Cursor.continue",d,s),u(_),!1})};U.prototype.__onsuccess=function(e){const t=this;return function(n,r,u){t.__count?e(r,t.__request):(n!==void 0&&(t.__gotValue=!0),t.__key=n===void 0?null:n,t.__primaryKey=u===void 0?null:u,t.__value=r===void 0?null:r,e(n===void 0?null:t,t.__request))}};U.prototype.__decode=function(e,t){const n=this;if(n.__multiEntryIndex&&n.__unique){if(n.__matchedKeys||(n.__matchedKeys={}),n.__matchedKeys[e.matchingKey]){t(void 0,void 0,void 0);return}n.__matchedKeys[e.matchingKey]=!0}const r=Ae(n.__multiEntryIndex?e.matchingKey:e[n.__keyColumnName]),u=Ae(e[n.__valueColumnName]),o=Ae(e.key),i=he(r,n.__multiEntryIndex),a=n.__valueDecoder.decode(u),s=he(o);t(i,a,s,r)};U.prototype.__sourceOrEffectiveObjStoreDeleted=function(){v.__invalidStateIfDeleted(this.__store,"The cursor's effective object store has been deleted"),this.__indexSource&&N.__invalidStateIfDeleted(this.source,"The cursor's index source has been deleted")};U.prototype.__invalidateCache=function(){this.__prefetchedData=null};U.prototype.__continue=function(e,t){const n=this,r=n.__advanceCount!==void 0;if(B.__assertActive(n.__store.transaction),n.__sourceOrEffectiveObjStoreDeleted(),!n.__gotValue&&!t)throw m("InvalidStateError","The cursor is being iterated or has iterated past its end.");if(e!==void 0){me(e);const u=Ie(e,n.key);if(u===0||n.direction.includes("next")&&u===-1||n.direction.includes("prev")&&u===1)throw m("DataError","Cannot "+(r?"advance":"continue")+" the cursor in an unexpected direction")}this.__continueFinish(e,void 0,r)};U.prototype.__continueFinish=function(e,t,n){const r=this,u=r.__advanceCount||D.cursorPreloadPackSize||100;r.__gotValue=!1,r.__request.__done=!1,r.__store.transaction.__pushToQueue(r.__request,function o(i,a,s,l,f){function c(d,h,_){if(n){if(r.__advanceCount&&r.__advanceCount>=2&&d!==void 0){r.__advanceCount--,r.__key=d,r.__continue(void 0,!0),f();return}r.__advanceCount=void 0}r.__onsuccess(s)(d,h,_)}if(r.__prefetchedData&&(r.__prefetchedIndex++,r.__prefetchedIndex<r.__prefetchedData.length)){r.__decode(r.__prefetchedData.item(r.__prefetchedIndex),function(d,h,_,y){function C(){const b=+(e===void 0)||Ie(d,e);if(b>0||b===0&&(r.__unique||t===void 0||Ie(_,t)>=0)){c(d,h,_);return}o(i,a,s,l)}if(r.__unique&&!r.__multiEntryIndex&&y===R(r.key,r.__multiEntryIndex)){o(i,a,s,l);return}C()});return}r.__find(e,t,i,c,function(...d){r.__advanceCount=void 0;const[h,_]=d;l(h,_)},u)})};U.prototype.continue=function(){this.__continue(arguments[0])};U.prototype.continuePrimaryKey=function(e,t){const n=this;if(B.__assertActive(n.__store.transaction),n.__sourceOrEffectiveObjStoreDeleted(),!n.__indexSource)throw m("InvalidAccessError","`continuePrimaryKey` may only be called on an index source.");if(!["next","prev"].includes(n.direction))throw m("InvalidAccessError","`continuePrimaryKey` may not be called with unique cursors.");if(!n.__gotValue)throw m("InvalidStateError","The cursor is being iterated or has iterated past its end.");me(e),me(t);const r=Ie(e,n.key);if(n.direction==="next"&&r===-1||n.direction==="prev"&&r===1)throw m("DataError","Cannot continue the cursor in an unexpected direction");function u(){n.__continueFinish(e,t,!1)}r===0?Re(t,function(o){Re(n.primaryKey,function(i){if(o===i||n.direction==="next"&&o<i||n.direction==="prev"&&o>i)throw m("DataError","Cannot continue the cursor in an unexpected direction");u()})}):u()};U.prototype.advance=function(e){const t=this;if(e=Ct(e,"unsigned long"),e===0)throw new TypeError("Calling advance() with count argument 0");t.__gotValue&&(t.__advanceCount=e),t.__continue()};U.prototype.update=function(e){const t=this;if(!arguments.length)throw new TypeError("A value must be passed to update()");if(B.__assertActive(t.__store.transaction),t.__store.transaction.__assertWritable(),t.__sourceOrEffectiveObjStoreDeleted(),!t.__gotValue)throw m("InvalidStateError","The cursor is being iterated or has iterated past its end.");if(t.__keyOnly)throw m("InvalidStateError","This cursor method cannot be called when the key only flag has been set.");const n=t.__store.transaction.__createRequest(t),r=t.primaryKey;function u(o){v.__storingRecordObjectStore(n,t.__store,!1,o,!1,r)}if(t.__store.keyPath!==null){const[o,i]=t.__store.__validateKeyAndValueAndCloneValue(e,void 0,!0);if(Ie(t.primaryKey,o)!==0)throw m("DataError","The key of the supplied value to `update` is not equal to the cursor's effective key");u(i)}else{const o=yt(e);u(o)}return n};U.prototype.delete=function(){const e=this;if(B.__assertActive(e.__store.transaction),e.__store.transaction.__assertWritable(),e.__sourceOrEffectiveObjStoreDeleted(),!e.__gotValue)throw m("InvalidStateError","The cursor is being iterated or has iterated past its end.");if(e.__keyOnly)throw m("InvalidStateError","This cursor method cannot be called when the key only flag has been set.");return this.__store.transaction.__addToTransactionQueue(function(n,r,u,o){e.__find(void 0,void 0,n,function(i,a,s){const l="DELETE FROM  "+W(e.__store.__currentName)+' WHERE "key" = ?';D.DEBUG&&console.log(l,i,s),n.executeSql(l,[Y(R(s))],function(f,c){c.rowsAffected===1?u(void 0):o("No rows with key found"+i)},function(f,c){return o(c),!1})},o)},void 0,e)};U.prototype[Symbol.toStringTag]="IDBCursorPrototype";Se(U.prototype,["source","direction","key","primaryKey","request"]);Object.defineProperty(U,"prototype",{writable:!1});function de(){throw new TypeError("Illegal constructor")}de.prototype=Object.create(U.prototype);Object.defineProperty(de.prototype,"constructor",{enumerable:!1,writable:!0,configurable:!0,value:de});const Ru=de;de.__createInstance=function(...e){function t(){const[n,r,u,o,i,a,s]=e;U.__super.call(this,n,r,u,o,i,a,s),this[Symbol.toStringTag]="IDBCursorWithValue",Te(this,"value")}return t.prototype=Ru.prototype,new t};Se(de.prototype,["value"]);de.prototype[Symbol.toStringTag]="IDBCursorWithValuePrototype";Object.defineProperty(de,"prototype",{writable:!1});function ct(e,t){if(e&&typeof e=="object"){Object.entries(e).forEach(([n,r])=>{ct(n,r)});return}if(!(e in D))throw new Error(e+" is not a valid configuration property");D[e]=t,e==="registerSCA"&&typeof t=="function"&&cr(t)}function Lu(e,t){t&&ct(t);const n=e||globalThis||{};function r(o,i,a){if(!a||!Object.defineProperty)try{n[o]=i}catch(s){console.log(s)}if(n[o]!==i&&Object.defineProperty)try{let s=a||{};if(!("get"in s))"value"in s||(s.value=i),"writable"in s||(s.writable=!0);else{const l={get[o](){return a.get.call(this)}};s=Object.getOwnPropertyDescriptor(l,o)}Object.defineProperty(n,o,s)}catch{}n[o]!==i&&typeof console<"u"&&console.warn&&console.warn("Unable to shim "+o)}D.win.openDatabase!==void 0&&r("shimIndexedDB",rt,{enumerable:!1,configurable:!0}),"shimIndexedDB"in n&&n.shimIndexedDB?(n.shimIndexedDB.__useShim=function(){function o(a=""){r(a+"DOMException",at),r(a+"DOMStringList",ee,{enumerable:!1,configurable:!0,writable:!0,value:ee}),r(a+"Event",M,{configurable:!0,writable:!0,value:M,enumerable:!1}),r(a+"CustomEvent",ie,{configurable:!0,writable:!0,value:ie,enumerable:!1}),r(a+"EventTarget",re,{configurable:!0,writable:!0,value:re,enumerable:!1})}const i=ue;if(D.win.openDatabase!==void 0){if(rt.__openDatabase=D.win.openDatabase.bind(D.win),r("indexedDB",rt,{enumerable:!0,configurable:!0,get(){if(this!==n&&!we(this)&&!this.shimNS)throw new TypeError("Illegal invocation");return rt}}),[["IDBFactory",i],["IDBDatabase",H],["IDBObjectStore",v],["IDBIndex",N],["IDBTransaction",B],["IDBCursor",U],["IDBCursorWithValue",de],["IDBKeyRange",G],["IDBRequest",$],["IDBOpenDBRequest",ge],["IDBVersionChangeEvent",ce]].forEach(([a,s])=>{r(a,s,{enumerable:!1,configurable:!0})}),D.fs&&Nu(D.fs),D.fullIDLSupport&&(Object.setPrototypeOf(n.IDBOpenDBRequest,n.IDBRequest),Object.setPrototypeOf(n.IDBCursorWithValue,n.IDBCursor),Object.setPrototypeOf(H,re),Object.setPrototypeOf($,re),Object.setPrototypeOf(B,re),Object.setPrototypeOf(ce,M),Object.setPrototypeOf(at,Error),Object.setPrototypeOf(at.prototype,Error.prototype),Ir()),n.indexedDB&&!n.indexedDB.toString().includes("[native code]")&&(D.addNonIDBGlobals&&o("Shim"),D.replaceNonIDBGlobals&&o()),!n.shimIndexedDB)return;n.shimIndexedDB.__setConnectionQueueOrigin()}},n.shimIndexedDB.__debug=function(o){D.DEBUG=o},n.shimIndexedDB.__setConfig=ct,n.shimIndexedDB.__getConfig=function(o){if(!(o in D))throw new Error(o+" is not a valid configuration property");return D[o]},n.shimIndexedDB.__setUnicodeIdentifiers=function({UnicodeIDStart:o,UnicodeIDContinue:i}){ct({UnicodeIDStart:o,UnicodeIDContinue:i})}):(n.shimIndexedDB={},["__useShim","__debug","__setConfig","__getConfig","__setUnicodeIdentifiers"].forEach(o=>{n.shimIndexedDB[o]=function(){console.warn("This browser does not have WebSQL to shim.")}})),!("indexedDB"in n)&&typeof window<"u"&&(n.indexedDB=n.indexedDB||"webkitIndexedDB"in n&&n.webkitIndexedDB||"mozIndexedDB"in n&&n.mozIndexedDB||"oIndexedDB"in n&&n.oIndexedDB||"msIndexedDB"in n&&n.msIndexedDB);let u=!1;return typeof navigator<"u"&&navigator.userAgent&&(/Android (?:2|3|4\.[0-3])/u.test(navigator.userAgent)&&!navigator.userAgent.includes("Chrome")||(!navigator.userAgent.includes("Safari")||navigator.userAgent.includes("Chrome"))&&/(iPad|iPhone|iPod).* os 9_/ui.test(navigator.userAgent)&&typeof window<"u"&&!("MSStream"in window))&&(u=!0),D.DEFAULT_DB_SIZE||(D.DEFAULT_DB_SIZE=(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")?25:4)*1024*1024),!D.avoidAutoShim&&(!n.indexedDB||u)&&D.win.openDatabase!==void 0?n.shimIndexedDB.__useShim():(n.IDBDatabase=n.IDBDatabase||"webkitIDBDatabase"in n&&n.webkitIDBDatabase,n.IDBTransaction=n.IDBTransaction||"webkitIDBTransaction"in n&&n.webkitIDBTransaction||{},n.IDBCursor=n.IDBCursor||"webkitIDBCursor"in n&&n.webkitIDBCursor,n.IDBKeyRange=n.IDBKeyRange||"webkitIDBKeyRange"in n&&n.webkitIDBKeyRange),n}D.win=typeof window<"u"?window:self;D.UnicodeIDStart=Cr;D.UnicodeIDContinue=Fr;export{Lu as default};
